import{L as o,N as S,P as T}from"./PageContent.8ca8d32a.js";import{E as O}from"./ExpandStack.265ebefe.js";import{r as d,A as M,j as i,x as n,v as h,k as e,T as r,t,B as P,av as x,bU as v,F as U,aA as u}from"./index.cd3d05cd.js";import{g as f,a as C,b as w,c as G}from"./examplesMaps.b6ccf45a.js";import{T as R}from"./TextField.0532452b.js";import{c as b}from"./MenuItem.278bd7ec.js";import{P as k}from"./PageFooter.6ac03f78.js";import"./Select.3cb583c8.js";import"./useFormControl.ccd90210.js";function L(s){try{return new URL(s),!0}catch{return!1}}const N=()=>{const[s,l]=d.exports.useState(()=>window.localStorage.getItem("lastMapUrl")||f().fullMapExample.url),[c,y]=d.exports.useState(null),[p,m]=d.exports.useState(!1),a=M(),E=()=>{if(!L(s)){y(!1),m(!0);return}a(x.mapSelected.createPath({d:window.btoa(s)}))};return i(n,{spacing:1,children:[i(h,{component:"div",pb:3,children:[e(r,{variant:"body1",children:"URL"}),i(n,{direction:"row",spacing:1,children:[e(h,{component:"div",sx:{flexGrow:1},children:e(R,{id:"url-input",variant:"outlined",value:s,onChange:g=>{m(!1),l(g.target.value)},error:p&&!c,helperText:p&&!c?t("mapEdit.invalidUrl"):void 0,fullWidth:!0,autoComplete:"off",size:"small"})}),e("div",{children:e(P,{variant:"outlined",onClick:E,disabled:s.length===0,children:t("mapEdit.loadAndOpenMap")})})]})]}),e(r,{variant:"body1",children:t("mapEdit.mapUrlSpecColon")}),e(h,{component:"div",p:2,sx:{border:"1px solid rgba(128,128,128,0.5)",borderRadius:"8px"},children:i(n,{direction:"row",spacing:1,children:[i(n,{spacing:1,sx:{flexGrow:1},children:[e(r,{variant:"body2",color:"text.secondary",children:t("mapEdit.loadMapSpec")}),i(b,{dense:!0,sx:{listStyleType:"disc",pt:0,pl:3,"& .MuiListItem-root":{display:"list-item"}},children:[e(o,{disableGutters:!0,children:e(r,{variant:"body2",color:"text.secondary",children:"HTTP Method: OPTION, GET"})}),e(o,{disableGutters:!0,children:e(r,{variant:"body2",color:"text.secondary",children:"Content-Type: text/plain"})}),e(o,{disableGutters:!0,children:e(r,{variant:"body2",color:"text.secondary",children:t("mapEdit.corsHeader")})})]})]}),i(n,{spacing:1,sx:{flexGrow:1},children:[e(r,{variant:"body2",color:"text.secondary",children:t("mapEdit.saveMapSpec")}),i(b,{dense:!0,sx:{listStyleType:"disc",pt:0,pl:3,"& .MuiListItem-root":{display:"list-item"}},children:[e(o,{disableGutters:!0,children:e(r,{variant:"body2",color:"text.secondary",children:"HTTP Method: OPTION, PUT"})}),e(o,{disableGutters:!0,children:e(r,{variant:"body2",color:"text.secondary",children:"Content-Type: text/plain"})}),e(o,{disableGutters:!0,children:e(r,{variant:"body2",color:"text.secondary",children:t("mapEdit.corsHeader")})}),e(o,{disableGutters:!0,children:e(r,{variant:"body2",color:"text.secondary",children:t("mapEdit.editKeySpec")})})]})]})]})})]})},W=()=>{const s=M(),l=a=>{s(x.mapSelected.createPath({d:window.btoa(a)}))},c=d.exports.useMemo(()=>Object.values(f()),[]),y=d.exports.useMemo(()=>C(),[]),p=d.exports.useMemo(()=>v.serverResult?Object.values(w()).reverse():[],[]),m=d.exports.useMemo(()=>v.serverResult?Object.values(G()).reverse():[],[]);return i(U,{children:[e(S,{currentRoute:x.map.path}),e(T,{children:i(h,{component:"div",p:1,children:[i(n,{pt:1,pb:2,spacing:2,children:[e(r,{variant:"body2",children:t("mapEdit.pageDescription1")}),e(r,{variant:"body2",children:t("mapEdit.pageDescription2")})]}),e(O,{expandables:[{id:"load",summary:t("mapEdit.openExternalMap"),details:e(N,{}),initiallyOpened:!1},{id:"examples",summary:t("mapEdit.openExampleMap"),details:e(n,{spacing:1,children:c.map(a=>e(u,{onClick:()=>l(a.url),children:a.name},a.url))}),initiallyOpened:!1},{id:"empty",summary:t("mapEdit.openEmptyMap"),details:i(n,{spacing:1,children:[y.map(a=>e(u,{onClick:()=>l(a.url),children:a.name},a.url)),e(r,{variant:"body2",color:"text.secondary",children:t("mapEdit.sizeCanBeAdjustedBrackets")})]}),initiallyOpened:!1},...v.serverResult?[{id:"serverResultsPhaseOne",summary:t("mapEdit.openServerResultMapOne"),details:e(n,{spacing:1,children:p.map(a=>e(u,{onClick:()=>l(a.url),children:a.name},a.url))}),initiallyOpened:!1},{id:"serverResultsPhaseN",summary:t("mapEdit.openServerResultMapN"),details:e(n,{spacing:1,children:m.map(a=>e(u,{onClick:()=>l(a.url),children:a.name},a.url))}),initiallyOpened:!1}]:[]]})]})}),e(k,{})]})};export{W as default};
