import{M as O,k as c,C as G,D as J,E as U,G as K,L as k,_ as I,r as f,P as V,H as W,J as q,j as A,K as M,n as Q,ab as X,T as L,F as m}from"./index.69d484ec.js";import{T as Y,a as Z,b as tt,c as j,d as z,e as et}from"./TableRow.d3e20b9d.js";var rt=O(c("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function ot(t){return G("MuiTableSortLabel",t)}const nt=J("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]);var x=nt;const st=["active","children","className","direction","hideSortIcon","IconComponent"],ct=t=>{const{classes:e,direction:o,active:r}=t,n={root:["root",r&&"active"],icon:["icon",`iconDirection${k(o)}`]};return q(n,ot,e)},at=U(K,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.active&&e.active]}})(({theme:t})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${x.icon}`]:{opacity:.5}},[`&.${x.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${x.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}})),it=U("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.icon,e[`iconDirection${k(o.direction)}`]]}})(({theme:t,ownerState:e})=>I({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},e.direction==="desc"&&{transform:"rotate(0deg)"},e.direction==="asc"&&{transform:"rotate(180deg)"})),lt=f.exports.forwardRef(function(e,o){const r=V({props:e,name:"MuiTableSortLabel"}),{active:n=!1,children:s,className:y,direction:u="asc",hideSortIcon:p=!1,IconComponent:b=rt}=r,a=W(r,st),i=I({},r,{active:n,direction:u,hideSortIcon:p,IconComponent:b}),l=ct(i);return A(at,I({className:M(l.root,y),component:"span",disableRipple:!0,ownerState:i,ref:o},a,{children:[s,p&&!n?null:c(it,{as:b,className:M(l.icon),ownerState:i})]}))});var dt=lt;const v="asc";function ut(t){return t===null?v:t==="asc"?"desc":"asc"}function pt(t){var o,r;const e=t.find(n=>!!n.initialSortDirection);return{initialSortBy:(o=e==null?void 0:e.id)!=null?o:null,initialSortDirection:(r=e==null?void 0:e.initialSortDirection)!=null?r:v}}function D(t,e,o){if(!e)return t;const r=[...t.data];return r.sort(Q(e)),o==="desc"&&r.reverse(),{...t,data:r}}const ft=t=>{const{table:e,size:o="medium"}=t;return c(Y,{component:X,children:A(Z,{size:o,children:[c(tt,{children:c(j,{children:e.header.map(r=>{var n,s;return c(z,{sortDirection:(n=r.sortDirection)!=null?n:!1,children:r.toggleSort?c(dt,{active:!!r.sortDirection,direction:(s=r.sortDirection)!=null?s:v,onClick:r.toggleSort,children:typeof r.content=="string"?c(L,{variant:"body2",children:r.content}):c(m,{children:r.content})}):c(m,{children:typeof r.content=="string"?c(L,{variant:"body2",children:r.content}):c(m,{children:r.content})})},r.id)})})}),c(et,{children:e.rows.map(r=>c(j,{children:r.cells.map(n=>c(z,{component:"th",scope:"row",children:typeof n.content=="string"?c(L,{variant:"body2",children:n.content}):c(m,{children:n.content})},n.id))},r.id))})]})})};function H(t,e,o,r){if(!t.sortFn)return{id:`header_${t.id}`,content:t.renderHeader(null,null),sortDirection:null,toggleSort:null};const n=()=>{r(t.id,t.id===e?ut(o):v)},s=t.id===e?o:null;return{id:`header_${t.id}`,content:t.renderHeader(s,n),sortDirection:s,toggleSort:n}}function N(t,e){return t.data.map(o=>({id:t.rowIdFn(o),cells:e.map(r=>({id:`${t.rowIdFn(o)}_${r.id}`,content:r.renderCell(o)}))}))}const Tt=(t={})=>{var p,b;const{initialSorting:e,onChangeSorting:o}=t,[r,n]=f.exports.useState({header:[],rows:[],sortBy:(p=e==null?void 0:e[0])!=null?p:null,sortDirection:(b=e==null?void 0:e[1])!=null?b:null}),s=f.exports.useRef(null),y=f.exports.useCallback(a=>{var T,d;const i=((T=s.current)==null?void 0:T.columns)!==a.columns,l=((d=s.current)==null?void 0:d.data)!==a.data;!i&&!l||(s.current={...s.current,...a},n(S=>{var R,$,C,_,F;const{initialSortBy:B,initialSortDirection:P}=pt(a.columns),h=($=(R=S.sortBy)!=null?R:B)!=null?$:null,w=(C=S.sortDirection)!=null?C:P,E=(F=(_=a.columns.find(g=>g.id===h))==null?void 0:_.sortFn)!=null?F:null;return{...S,header:i?a.columns.map(g=>H(g,h,w,u)):S.header,rows:i||l?N(D(a,E,w),a.columns):S.rows,sortBy:h,sortDirection:w}}))},[]),u=f.exports.useCallback((a,i)=>{var l;if(s.current){const T=(l=s.current.columns.find(d=>d.id===a))==null?void 0:l.sortFn;n({...r,header:s.current.columns.map(d=>H(d,a,i,u)),rows:N(D(s.current,T,i),s.current.columns),sortBy:a,sortDirection:i}),o==null||o([a,i])}},[r,s,o]);return{table:r,setTableData:y,setSorting:u}};export{ft as T,Tt as u};
