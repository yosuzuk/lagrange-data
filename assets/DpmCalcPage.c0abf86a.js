import{Q as pu,R as mu,U as vu,r as D,j as F,F as S,k as t,aS as _u,aT as bu,aU as hu,aV as fu,B as Fu,t as Pu,bS as A,x as O,v as g,bA as eu,T as h,ac as L,ab as M}from"./index.c96e7890.js";import{T as Nu,b as nu,N as Ou,P as gu}from"./PageContent.8eaae83d.js";import{P as Ru}from"./PageFooter.14d8ddc9.js";import{I as Su,a as Iu}from"./MenuItem.77cde226.js";import{D as lu}from"./DialogContentText.c35104ac.js";import{T as J}from"./TextField.ab929333.js";import{I as $u}from"./InputAdornment.dc59cc25.js";import{d as xu}from"./Add.0f6412d9.js";import{d as Mu}from"./Delete.3bb2bf93.js";import{T as Uu}from"./Tooltip.3c6a7ab4.js";import{T as tu,a as ru,b as iu,c as K,d as w,e as ou}from"./TableRow.edfc5ac6.js";import{A as wu}from"./Alert.b194a33d.js";import{A as yu}from"./AlertTitle.9f8fac82.js";import"./Select.1332054c.js";import"./useFormControl.c4196250.js";import"./Popper.f1f6dc98.js";var _=(u=>(u.TYPE="type",u.SQUAD_SIZE="squadSize",u.FIGHTER_ATTACK_PATTERN="fighterAttackPattern",u.CORVETTE_ATTACK_PATTERN="corvetteAttackPattern",u))(_||{}),d=(u=>(u.INSTALLATION="installation",u.DAMAGE_TYPE="damageType",u.DAMAGE_PER_HIT="damagePerHit",u.TUNE="tune",u.DURATION="duration",u.ATTACKS_PER_ROUND="attacksPerRound",u.SHOTS_PER_ATTACK="shotsPerAttack",u.COOLDOWN="cooldown",u.ATTACKS_PER_ROUND_ION="attacksPerRoundIon",u.SHOTS_PER_ATTACK_ION="shotsPerAttackIon",u.LOCK_ON_TIME="lockOnTime",u))(d||{}),R=(u=>(u.INCREASE_DAMAGE_PER_HIT="increaseDamagePerHit",u.REDUCE_DURATION="reduceDuration",u.REDUCE_COOLDOWN="reduceCooldown",u.REDUCE_LOCKON="reduceLockon",u.INCREASE_ATTACKS_PER_ROUND="increaseAttacksPerRound",u))(R||{}),U=(u=>(u.HP="hp",u.ARMOR="armor",u.ENERGY_SHIELD="energyShield",u))(U||{}),T=(u=>(u.PERCENTAGE="PERCENTAGE",u.SECONDS="SECONDS",u.DPM="DPM",u.ION_ATTACK_COUNT="ION_ATTACK_COUNT",u.FIGHTER_COUNT="FIGHTER_COUNT",u))(T||{});function H(u){return Object.keys(u).reduce((l,a)=>({...l,[a]:{...u[a],id:a}}),{})}function Lu(){return H({[_.TYPE]:j({label:"\u30BF\u30A4\u30D7",value:"ship",options:[{id:"ship",label:"\u8266\u8239",value:"ship"},{id:"corvette",label:"\u8B77\u9001\u8266",value:"corvette"},{id:"fighter",label:"\u6226\u95D8\u6A5F",value:"fighter"}]}),[_.SQUAD_SIZE]:b({label:"\u7DE8\u968A\u30B5\u30A4\u30BA",value:1,unit:T.FIGHTER_COUNT,min:1,max:5,description:"\u8A73\u7D30\u753B\u9762\u306E\u53F3\u4E0A\u306B\u8868\u793A\u3055\u308C\u307E\u3059\u3002\uFF11\u7DE8\u968A\u6BCE\u306E\u6226\u95D8\u6A5F\u306E\u6570\u3067\u3059\uFF08\u4F8B\uFF1A\u30DF\u30B9\u30C8\u30E9\u30EB\u306F\uFF14\u6A5F\uFF09\u3002"}),[_.FIGHTER_ATTACK_PATTERN]:j({label:"\u653B\u6483\u30D1\u30BF\u30FC\u30F3",value:"rtb",options:[{id:"rtb",label:"\u4F4F\u8907\u653B\u6483",value:"rtb"},{id:"noRtb",label:"\u72EC\u7ACB\u4F5C\u6226",value:"noRtb"}],description:"\u6307\u4EE4\u30B7\u30B9\u30C6\u30E0\u306E\u8A73\u7D30\u753B\u9762\u3067\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002\u300C\u4F4F\u8907\u653B\u6483\u300D\u304C\u8A18\u8F09\u3055\u308C\u3066\u3044\u308B\u8266\u8F09\u6A5F\u306F\u51B7\u5374\u6642\u306B\u7A7A\u6BCD\u3078\u5E30\u9084\u3057\u307E\u3059\u3002\u518D\u51FA\u6483\u6642\u306B\u306F\u518D\u5EA6\u30ED\u30C3\u30AF\u30AA\u30F3\u6642\u9593\u304C\u767A\u751F\u3057\u307E\u3059\u3002"}),[_.CORVETTE_ATTACK_PATTERN]:j({label:"\u653B\u6483\u30D1\u30BF\u30FC\u30F3",value:"noRtb",options:[{id:"noRtb",label:"\u72EC\u7ACB\u4F5C\u6226",value:"noRtb"},{id:"rtb",label:"\u4F4F\u8907\u653B\u6483",value:"rtb"}],description:"\u6307\u4EE4\u30B7\u30B9\u30C6\u30E0\u306E\u8A73\u7D30\u753B\u9762\u3067\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002\u300C\u4F4F\u8907\u653B\u6483\u300D\u304C\u8A18\u8F09\u3055\u308C\u3066\u3044\u308B\u8266\u8F09\u6A5F\u306F\u51B7\u5374\u6642\u306B\u7A7A\u6BCD\u3078\u5E30\u9084\u3057\u307E\u3059\u3002\u518D\u51FA\u6483\u6642\u306B\u306F\u518D\u5EA6\u30ED\u30C3\u30AF\u30AA\u30F3\u6642\u9593\u304C\u767A\u751F\u3057\u307E\u3059\u3002"})})}function Hu(){return H({[d.INSTALLATION]:b({label:"\u8A2D\u7F6E\u6570",value:1,description:"\u6B66\u5668\u60C5\u5831\u753B\u9762\u5185\u3001\u5DE6\u4E0A\u306B\u8868\u793A\u3055\u308C\u308B\u30AA\u30EC\u30F3\u30B8\u306E\u6570\u5B57\uFF08\u6B66\u5668\u540D\u306E\u524D\uFF09"}),[d.DAMAGE_TYPE]:j({label:"\u30C0\u30E1\u30FC\u30B8\u30BF\u30A4\u30D7",value:"physicalDamage",options:[{id:"physicalDamage",label:"\u5B9F\u5F3E\u30C0\u30E1\u30FC\u30B8",value:"physicalDamage"},{id:"energyDamageIon",label:"\u30A8\u30CD\u30EB\u30AE\u30FC\uFF08\u30A4\u30AA\u30F3\uFF09",value:"energyDamageIon"},{id:"energyDamage",label:"\u30A8\u30CD\u30EB\u30AE\u30FC\uFF08\u30D1\u30EB\u30B9\u3001\u30D7\u30E9\u30BA\u30DE\uFF09",value:"energyDamage"}]}),[d.DAMAGE_PER_HIT]:b({label:"\u5358\u767A\u30C0\u30E1\u30FC\u30B8",description:"\u30B9\u30AD\u30EB\u3092\u30EA\u30BB\u30C3\u30C8\u3057\u3066\u304B\u3089\u8AAD\u307F\u53D6\u3063\u3066\u304F\u3060\u3055\u3044\u3002\u30C1\u30E5\u30FC\u30F3\u6E08\u307F\u3067\u6570\u5B57\u304C\u4E8C\u3064\u8868\u793A\u3055\u308C\u308B\u5834\u5408\u306F\u5DE6\u5074\u306E\u6570\u5B57\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u4F8B\u3048\u3070\u300C300+90.0\u300D\u306E\u5834\u5408\u306F\u300C300\u300D\u3067\u3059\u3002\u521D\u671F\u72B6\u614B\u3067\u3082\u30E2\u30B8\u30E5\u30FC\u30EB\u306B\u3088\u308B\u30C0\u30E1\u30FC\u30B8\u30A2\u30C3\u30D7\u52B9\u679C\u304C\u4E57\u3063\u3066\u3044\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002\u305D\u306E\u5834\u5408\u306F\u3001\u5148\u306B\u5143\u306E\u5358\u767A\u30C0\u30E1\u30FC\u30B8\u3092\u9006\u7B97\u3057\u3066\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\uFF08\u4F8B\uFF1A\u30EB\u30D3\u30FC\u7D1A\u306E\u5C0F\u578B\u30A4\u30AA\u30F3\u7832\u306F\u521D\u671F\u72B6\u614B\u3067\u5358\u767A\u30C0\u30E1\u30FC\u30B8\u304C\u300C316\u300D\u3068\u8868\u793A\u3055\u308C\u307E\u3059\u304C\u3001\u30A8\u30CD\u30EB\u30AE\u30FC\u30B7\u30B9\u30C6\u30E0\u306E15\uFF05\u304C\u4E57\u3063\u3066\u3044\u308B\u72B6\u614B\u306A\u306E\u3067\u3001\u5143\u306F\u300C275\u300D\u3067\u3059\uFF09\u3002",value:null}),[d.TUNE]:b({label:"\u6B66\u5668\u30C1\u30E5\u30FC\u30F3",value:0,unit:T.PERCENTAGE,max:30}),[d.DURATION]:b({label:"\u6301\u7D9A\u6642\u9593",value:0,description:"\u30E2\u30B8\u30E5\u30FC\u30EB\u30B9\u30C6\u30FC\u30BF\u30B9\u3067\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002\u300C--\u300D\u3068\u8868\u793A\u3055\u308C\u308B\u5834\u5408\u306F\uFF10\u79D2\u3067\u3059\u3002\u5225\u540D\u300C\u51FA\u529B\u6642\u9593\u300D/\u300C\u653B\u6483\u9593\u9694\u300D/\u300C\u653B\u6483\u6642\u9593\u300D",unit:T.SECONDS}),[d.SHOTS_PER_ATTACK]:b({label:"\u540C\u6642\u5C04\u6483\u6570",description:["\uFF11\u56DE\u306E\u653B\u6483\u3067\u540C\u6642\u306B\u6483\u3066\u308B\u5F3E\u6570","\u30E2\u30B8\u30E5\u30FC\u30EB\u30B9\u30C6\u30FC\u30BF\u30B9\u3067\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002\u300C\u653B\u6483\u56DE\u6570\u300D\u306E\u5DE6\u5074\u306E\u6570\u5024\u3067\u3059\u3002","\u4F8B\u3048\u3070\u300C2 x 8\u300D\u306E\u5834\u5408\u306F\u300C2\u300D\u3067\u3059\uFF088\u56DE\u306B\u308F\u305F\u3063\u30662\u767A\u305A\u3064\u653B\u6483\u3057\u3066\u307E\u3059\uFF09\u3002","\u9805\u76EE\u304C\u8868\u793A\u3055\u308C\u306A\u3044\u5834\u5408\u306F\u300C\u30C0\u30E1\u30FC\u30B8\u30BF\u30A4\u30D7\u300D\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002"],value:1,min:1}),[d.ATTACKS_PER_ROUND]:b({label:"\u653B\u6483\u56DE\u6570",description:["\uFF11\u30E9\u30A6\u30F3\u30C9\u6BCE\u306E\u653B\u6483\u56DE\u6570","\u30E2\u30B8\u30E5\u30FC\u30EB\u30B9\u30C6\u30FC\u30BF\u30B9\u3067\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002\u300C\u653B\u6483\u56DE\u6570\u300D\u306E\u53F3\u5074\u306E\u6570\u5024\u3067\u3059","\u4F8B\u3048\u3070\u300C2 x 8\u300D\u306E\u5834\u5408\u306F\u300C8\u300D\u3067\u3059\uFF088\u56DE\u306B\u308F\u305F\u3063\u30662\u767A\u305A\u3064\u653B\u6483\u3057\u3066\u307E\u3059\uFF09\u3002","\u9805\u76EE\u304C\u8868\u793A\u3055\u308C\u306A\u3044\u5834\u5408\u306F\u300C\u30C0\u30E1\u30FC\u30B8\u30BF\u30A4\u30D7\u300D\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002"],value:1,min:1}),[d.COOLDOWN]:b({label:"\u51B7\u5374\u6642\u9593",description:"\u30E2\u30B8\u30E5\u30FC\u30EB\u30B9\u30C6\u30FC\u30BF\u30B9\u3067\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002\u6226\u95D8\u6A5F\u306E\u5834\u5408\u306F\u300C\u5E30\u9084\u51B7\u5374\u300D\u3068\u3082\u547C\u3070\u308C\u307E\u3059\u3002",unit:T.SECONDS}),[d.ATTACKS_PER_ROUND_ION]:b({label:"\u30C0\u30E1\u30FC\u30B8\u983B\u5EA6",description:"\u30E2\u30B8\u30E5\u30FC\u30EB\u30B9\u30C6\u30FC\u30BF\u30B9\u3067\u78BA\u8A8D\u3067\u304D\u307E\u3059\u3002\u3053\u306E\u9805\u76EE\u306F\u30A4\u30AA\u30F3\u7832\u9650\u5B9A\u3067\u3059\u3002\u8868\u793A\u3055\u308C\u306A\u3044\u5834\u5408\u306F\u300C\u30C0\u30E1\u30FC\u30B8\u30BF\u30A4\u30D7\u300D\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002",value:1,unit:T.ION_ATTACK_COUNT,min:1}),[d.SHOTS_PER_ATTACK_ION]:b({label:"\u540C\u6642\u5C04\u6483\u6570\uFF08\u30A4\u30AA\u30F3\u7832\uFF09",description:"\u30A4\u30AA\u30F3\u7832\u304C\uFF11\u56DE\u306E\u653B\u6483\u3067\u540C\u6642\u306B\u6483\u3064\u5F3E\u6570\u306F\u6B66\u5668\u306E\u540D\u524D\u306B\u96A0\u3055\u308C\u3066\u3044\u307E\u3059\u3002\u6B66\u5668\u60C5\u5831\u753B\u9762\u5185\u3001\u540D\u524D\u306E\u30A2\u30EB\u30D5\u30A1\u30D9\u30C3\u30C8\uFF12\u6587\u5B57\u3068\u6A2A\u7DDA\u306E\u5F8C\u306B\u300C2x\u300D\u3068\u3042\u308C\u3070\uFF12\u767A\u3067\u3059\u3002\u4F8B\u3048\u3070\u300CCI-2x700T\u578B\u300D\u306E\u5834\u5408\u306F\u300CC\u300D\u304C\u4F01\u696D\u3001\u300CI\u300D\u304C\u6B66\u5668\u306E\u7A2E\u985E\u3001\u305D\u306E\u5F8C\u308D\u306E\u300C2x\u300D\u304C\u540C\u6642\u5C04\u6483\u6570\u3067\u3059\u3002",value:1}),[d.LOCK_ON_TIME]:b({label:"\u30ED\u30C3\u30AF\u30AA\u30F3\u6642\u9593",description:"\u5225\u540D\u300C\u76EE\u6A19\u9078\u629E\u6642\u9593\u300D",unit:T.SECONDS})})}function ku(){return H({[R.INCREASE_DAMAGE_PER_HIT]:b({label:"\u30C0\u30E1\u30FC\u30B8\u30A2\u30C3\u30D7",description:"\u30B9\u30AD\u30EB\u3068\u30E2\u30B8\u30E5\u30FC\u30EB\u304B\u3089\u53CD\u6620\u3055\u308C\u308B\u30C0\u30E1\u30FC\u30B8\u30A2\u30C3\u30D7\u3092\u5408\u308F\u305B\u3066\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\uFF08\u4F8B\uFF1A\u30EB\u30D3\u30FC\u7D1A\u306E\u5834\u5408\u306F\u30B9\u30AD\u30EB\u306E\uFF12\uFF10\uFF05\u3068\u30A8\u30CD\u30EB\u30AE\u30FC\u30B7\u30B9\u30C6\u30E0\u306E\uFF11\uFF15\uFF05\u3067\u5408\u8A08\uFF13\uFF15\uFF05\u3067\u3059\uFF09",value:0,unit:T.PERCENTAGE,min:-500}),[R.REDUCE_DURATION]:b({label:"\u6301\u7D9A\u6642\u9593\u30C0\u30A6\u30F3",description:"\u5225\u540D\u300C\u51FA\u529B\u6642\u9593\u30C0\u30A6\u30F3\u300D/\u300C\u653B\u6483\u9593\u9694\u30C0\u30A6\u30F3\u300D/\u300C\u653B\u6483\u6642\u9593\u30C0\u30A6\u30F3\u300D\u3002\u9006\u306B\u30A2\u30C3\u30D7\u3059\u308B\u5834\u5408\u306F\u30DE\u30A4\u30CA\u30B9\u306E\u6570\u5024\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\uFF08\u4F8B\uFF1A\u30AB\u30EA\u30B9\u30C8\u306E\u300C\u91CD\u5F3E\u85AC\u300D\uFF09",value:0,unit:T.PERCENTAGE,min:-500,max:100}),[R.REDUCE_COOLDOWN]:b({label:"\u51B7\u5374\u6642\u9593\u30C0\u30A6\u30F3",description:"\u6226\u95D8\u6A5F\u306E\u5834\u5408\u306F\u5E30\u9084\u51B7\u5374\u30C0\u30A6\u30F3",value:0,unit:T.PERCENTAGE,min:-500,max:100}),[R.REDUCE_LOCKON]:b({label:"\u30ED\u30C3\u30AF\u30AA\u30F3\u6642\u9593\u30C0\u30A6\u30F3",description:"\u5225\u540D\u300C\u76EE\u6A19\u9078\u629E\u6642\u9593\u30C0\u30A6\u30F3\u300D",value:0,unit:T.PERCENTAGE,min:-500,max:100}),[R.INCREASE_ATTACKS_PER_ROUND]:b({label:"\u653B\u6483\u56DE\u6570\u30A2\u30C3\u30D7",description:"\uFF11\u30E9\u30A6\u30F3\u30C9\u6BCE\u306E\u653B\u6483\u56DE\u6570\u304C\u5897\u52A0\u3059\u308B\uFF08\u4F8B\uFF1A\u30EB\u30D3\u30FC\u7D1A\u306E\u300C\u6301\u7D9A\u51FA\u529B\u5F37\u5316\u300D\uFF09",value:0,min:-10,max:10})})}function Gu(){return H({[U.HP]:b({label:"HP",min:1,max:1e6}),[U.ARMOR]:b({label:"\u30C0\u30E1\u30FC\u30B8\u62B5\u6297",value:0,min:0,max:1e4}),[U.ENERGY_SHIELD]:b({label:"\u30B7\u30FC\u30EB\u30C9\u5024",value:0,unit:T.PERCENTAGE,min:0,max:100})})}function b(u){return{id:"[id]",label:"[label]",type:"numeric",value:null,min:0,...u}}function j(u){return{id:"[id]",label:"[label]",type:"select",value:"",options:[],...u}}function Z(u,l){switch(l.type){case"numeric":{const a=Number.isFinite(u)?u:null;return l.value===a?l:{...l,value:a}}case"select":{const a=u===null?null:`${u}`;return l.value===a?l:{...l,value:a}}default:throw new Error(`Unsupported input property type "${l.type}"`)}}function Ku(u,l){switch(u.id){case _.SQUAD_SIZE:case _.FIGHTER_ATTACK_PATTERN:return l.type.value==="fighter";case _.CORVETTE_ATTACK_PATTERN:return l.type.value==="corvette";default:return!0}}function Yu(u,l){switch(u.id){case d.ATTACKS_PER_ROUND:case d.SHOTS_PER_ATTACK:return l.damageType.value==="physicalDamage"||l.damageType.value==="energyDamage";case d.ATTACKS_PER_ROUND_ION:case d.SHOTS_PER_ATTACK_ION:return l.damageType.value==="energyDamageIon";default:return!0}}var au={},Wu=mu.exports;Object.defineProperty(au,"__esModule",{value:!0});var Bu=au.default=void 0,zu=Wu(pu),Vu=vu,ju=(0,zu.default)((0,Vu.jsx)("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}),"HelpOutline");Bu=au.default=ju;const q=u=>{const{title:l,text:a}=u,[n,e]=D.exports.useState(!1),r=()=>{e(!0)},i=()=>{e(!1)};return F(S,{children:[t(Su,{onClick:r,children:t(Bu,{fontSize:"small",color:"secondary"})}),F(_u,{open:n,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[t(bu,{id:"alert-dialog-title",children:l}),t(hu,{children:Array.isArray(a)?a.map((o,E)=>t(lu,{id:`alert-dialog-description-${E}`,gutterBottom:!0,children:o},`line_${E}`)):t(lu,{id:"alert-dialog-description",children:a})}),t(fu,{children:t(Fu,{onClick:i,variant:"outlined",children:Pu("button.close")})})]})]})};function Tu(u){switch(u){case T.PERCENTAGE:return"%";case T.SECONDS:return"\u79D2";case T.DPM:return"/\u5206";case T.ION_ATTACK_COUNT:return"\u6B21";case T.FIGHTER_COUNT:return"\u6A5F"}}function Y(u){return 1+u/100}function W(u){return 1-u/100}function Eu(u){return`100% + ${A(u)}%`}function z(u){return`100% - ${A(u)}%`}const qu="8em",Qu="15em",Du=u=>{const{inputProperty:l,onChange:a,width:n}=u,[e,r]=D.exports.useState(l),[i,o]=D.exports.useTransition();D.exports.useEffect(()=>{o(()=>{e!==l&&a(e)})},[e,l,a]);const E=s=>{switch(e.type){case"numeric":{if(s.target.value===""){r(Z(null,e));return}const B=Number(s.target.value),C=Number.isFinite(B)?B:null;r(Z(C,e));break}case"select":{r(Z(s.target.value,e));break}default:throw new Error(`Unsupported input property type "${e.type}"`)}};switch(e.type){case"numeric":{const{value:s,unit:B,min:C,max:m}=e;return t(S,{children:F(O,{direction:"row",children:[t(g,{component:"div",sx:{width:n!=null?n:qu},children:t(J,{id:e.id,size:"small",required:!0,type:"number",value:s!=null?s:"",InputProps:{endAdornment:B?t($u,{position:"end",children:Tu(B)}):void 0,inputProps:{min:C,max:m}},onChange:E,fullWidth:!0})}),e.description&&t(q,{title:e.label,text:e.description})]})})}case"select":{const{value:s,options:B}=e;return t(S,{children:F(O,{direction:"row",children:[t(g,{component:"div",sx:{width:n!=null?n:Qu},children:t(J,{id:e.id,size:"small",select:!0,value:s,onChange:E,fullWidth:!0,children:B.map(C=>t(Iu,{value:C.value,children:C.label},C.id))})}),e.description&&t(q,{title:e.label,text:e.description})]})})}default:throw new Error(`Unsupported input property type "${e.type}"`)}},su=u=>{const{properties:l,onChange:a,isVisibleProperty:n}=u;return t(eu,{sx:{alignItems:"center"},rows:Object.values(l).filter(e=>n(e,l)).map(e=>({key:e.id,label:e.label,value:t(Du,{inputProperty:e,onChange:a})}))})},cu=5,Au=u=>{const{idPrefix:l,tabNamePrefix:a,propertyFactoryFn:n}=u,e=D.exports.useRef(0),[r,i]=D.exports.useState(()=>[du(l,e,a,n)]),[o,E]=D.exports.useState(0),s=D.exports.useRef(null),B=D.exports.useCallback(()=>{const f=du(l,e,a,n);s.current=f.id,i(P=>P.length>=cu?P:[...P,f])},[l,a,n]),C=D.exports.useCallback(f=>{E(0),i(P=>P.filter(p=>p.id!==f))},[]),m=D.exports.useCallback((f,P)=>{i(p=>p.map(v=>v.id!==f?v:{...v,name:P}))},[]),I=D.exports.useCallback((f,P)=>{i(p=>p.map(v=>v.id!==f?v:{...v,properties:{...v.properties,[P.id]:P}}))},[]);return D.exports.useEffect(()=>{if(s.current===null)return;const f=r.findIndex(P=>P.id===s.current);o!==f&&E(f),s.current=null},[r,o]),{tabIndex:o,canAddTab:r.length<cu,tabs:r,setTabIndex:E,addTab:B,removeTab:C,renameTab:m,changeProperty:I}};function du(u,l,a,n){const e=l.current++;return{id:`${u}${e}`,name:"",defaultName:r=>`${a}${r+1}`,properties:n()}}const Zu=u=>{const{tabId:l,properties:a,onChange:n}=u,e=D.exports.useCallback(r=>{n(l,r)},[n,l]);return t(eu,{sx:{alignItems:"center"},rows:Object.values(a).map(r=>({key:r.id,label:r.label,value:t(Du,{inputProperty:r,onChange:e})}))})},Xu=20,Ju=u=>{const{idPrefix:l,tab:a,tabIndex:n,canDelete:e,canRename:r,onChangeProperty:i,onDeleteTab:o,onRename:E}=u,[s,B]=D.exports.useState(a.name),[C,m]=D.exports.useTransition();return D.exports.useEffect(()=>{m(()=>{a.name!==s&&E(a.id,s)})},[a,s,E]),F(O,{spacing:3,children:[F(O,{direction:"row",alignItems:"center",flexWrap:"wrap",sx:{gap:"8px"},children:[r&&t(g,{component:"div",sx:{flexGrow:1},children:t(J,{id:`${l}_name_${a.id}`,size:"small",required:!0,type:"text",value:s,placeholder:a.defaultName(n),InputProps:{inputProps:{maxLength:Xu}},onChange:I=>B(I.target.value.trim()),fullWidth:!0})}),e&&t("div",{children:t(Fu,{onClick:()=>o(a.id),startIcon:t(Mu,{}),variant:"outlined",children:t(h,{noWrap:!0,variant:"button",children:"\u8A2D\u5B9A\u3092\u524A\u9664"})})})]}),t(Zu,{tabId:a.id,properties:a.properties,onChange:i})]})},Cu=u=>{const{idPrefix:l,tabs:a,tabIndex:n,canAddTab:e,addTab:r,removeTab:i,renameTab:o,changeProperty:E,setTabIndex:s}=u,B=D.exports.useCallback((C,m)=>{m<a.length&&s(m)},[a,s]);return F(S,{children:[F(Nu,{value:n,onChange:B,variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,children:[a.map((C,m)=>t(nu,{label:t(h,{variant:"body2",children:C.name||C.defaultName(m)})},C.id)),e&&t(nu,{label:t(xu,{}),onClick:r})]}),t(g,{component:"div",p:1,pt:2,children:a.map((C,m)=>[C,m]).filter(([C,m])=>m===n).map(([C,m])=>t(Ju,{idPrefix:l,tab:C,tabIndex:m,canDelete:a.length>1,canRename:a.length>1,onChangeProperty:E,onDeleteTab:i,onRename:o},C.id))})]})};var c=(u=>(u.DAMAGE_PER_HIT_IN_STATUS="damagePerHitInStatus",u.DAMAGE_PER_HIT_IN_BATTLE="damagePerHitInBattle",u.DURATION="duration",u.COOLDOWN="cooldown",u.LOCK_ON_TIME="lockOnTime",u.ATTACKS_PER_ROUND="attacksPerRound",u.SHOTS_PER_ATTACK="shotsPerAttack",u.BATTLE_CYCLE_TIME="battleCycleTime",u.DAMAGE_PER_ROUND_IN_STATUS="damagePerRoundInStatus",u.DAMAGE_PER_ROUND_IN_BATTLE="damagePerRoundInBattle",u.TIME_TO_DESTROY_TARGET="timeToDestroyTarget",u.WEAPON_DPM_IN_STATUS="weaponDpmInStatus",u.WEAPON_DPM_IN_BATTLE="weaponDpmInBattle",u.SQUAD_WEAPON_DPM_IN_STATUS="squadDpmInStatus",u.SQUAD_WEAPON_DPM_IN_BATTLE="squadDpmInBattle",u))(c||{});function u0(){return H({[c.DAMAGE_PER_HIT_IN_STATUS]:N({label:"\u5358\u767A\u30C0\u30E1\u30FC\u30B8",description:"\u30B9\u30AD\u30EB\u8A2D\u5B9A\u5F8C\u306E\u6B66\u5668\u60C5\u5831\u753B\u9762\u306B\u8868\u793A\u3055\u308C\u308B\u6570\u5024\uFF08\u653B\u6483\u76EE\u6A19\u306E\u62B5\u6297\u5024/\u30B7\u30FC\u30EB\u30C9\u5024\u306F\u8003\u616E\u3057\u306A\u3044\u6570\u5024\uFF09",dependsOn:{weaponBaseProperties:[d.DAMAGE_PER_HIT,d.TUNE],weaponEnhancementProperties:[R.INCREASE_DAMAGE_PER_HIT]},update:({weaponBaseProperties:u,weaponEnhancementProperties:l},a)=>{const{damagePerHit:n,tune:e}=u,{increaseDamagePerHit:r}=l;return n.value===null||r.value===null||e.value===null?a:{...a,value:n.value*Y(r.value)*Y(e.value),formula:{formula:`([${n.label}] * (100% + [${r.label}])) + ([${n.label}] * [${e.label}] * (100% + [${r.label}]))`,filledFormula:[`(${A(n.value)} * (${Eu(r.value)})) + (${A(n.value)} * ${e.value}% * (${Eu(r.value)})))`,`${n.value*Y(r.value)} + ${n.value*(e.value/100)*Y(r.value)}`]}}}}),[c.DAMAGE_PER_HIT_IN_BATTLE]:N({label:"\u5358\u767A\u30C0\u30E1\u30FC\u30B8\uFF08\u76EE\u6A19\u5225\uFF09",description:"\u653B\u6483\u76EE\u6A19\u306E\u62B5\u6297\u5024/\u30B7\u30FC\u30EB\u30C9\u5024\u3092\u8003\u616E\u3057\u305F\u6570\u5024",dependsOn:{weaponBaseProperties:[d.DAMAGE_TYPE],targetProperties:[U.ARMOR,U.ENERGY_SHIELD],outputProperties:[c.DAMAGE_PER_HIT_IN_STATUS]},update:({weaponBaseProperties:u,targetProperties:l,outputProperties:a},n)=>{const{damagePerHitInStatus:e}=a,{armor:r,energyShield:i}=l;return e.value===null?n:u.damageType.value==="energyDamage"||u.damageType.value==="energyDamageIon"?i.value===null?n:{...n,value:e.value*W(i.value),formula:{formula:`[${e.label}] * (100% - [${i.label}])`,filledFormula:`${A(e.value)} * (${z(i.value)})`}}:r.value===null?n:{...n,value:Math.max(e.value-r.value,Math.floor(e.value*.1)),formula:{formula:`max([${e.label}] - [${r.label}], trunc([${e.label}] * 10%))`,filledFormula:`max(${A(e.value)} - ${A(r.value)}, trunc(${A(e.value)} * 0.1))`}}}}),[c.DURATION]:N({label:"\u6301\u7D9A\u6642\u9593",unit:T.SECONDS,dependsOn:{weaponBaseProperties:[d.DURATION],weaponEnhancementProperties:[R.REDUCE_DURATION]},update:({weaponBaseProperties:u,weaponEnhancementProperties:l},a)=>{const{duration:n}=u,{reduceDuration:e}=l;return n.value===null||e.value===null?a:{...a,value:Math.max(n.value*W(e.value),0),formula:{formula:`max([${n.label}] * (100% - [${e.label}]), 0)`,filledFormula:`max(${n.value} * (${z(e.value)}), 0)`}}}}),[c.COOLDOWN]:N({label:"\u51B7\u5374\u6642\u9593",unit:T.SECONDS,dependsOn:{weaponBaseProperties:[d.COOLDOWN],weaponEnhancementProperties:[R.REDUCE_COOLDOWN]},update:({weaponBaseProperties:u,weaponEnhancementProperties:l},a)=>{const{cooldown:n}=u,{reduceCooldown:e}=l;return n.value===null||e.value===null?a:{...a,value:Math.max(n.value*W(e.value),0),formula:{formula:`max([${n.label}] * (100% - [${e.label}]), 0)`,filledFormula:`max(${n.value} * (${z(e.value)}), 0)`}}}}),[c.LOCK_ON_TIME]:N({label:"\u30ED\u30C3\u30AF\u30AA\u30F3\u6642\u9593",unit:T.SECONDS,dependsOn:{weaponBaseProperties:[d.LOCK_ON_TIME],weaponEnhancementProperties:[R.REDUCE_LOCKON]},update:({weaponBaseProperties:u,weaponEnhancementProperties:l},a)=>{const{lockOnTime:n}=u,{reduceLockon:e}=l;return n.value===null||e.value===null?a:{...a,value:Math.max(n.value*W(e.value),0),formula:{formula:`max([${n.label}] * (100% - [${e.label}]), 0)`,filledFormula:`max(${n.value} * (${z(e.value)}), 0)`}}}}),[c.ATTACKS_PER_ROUND]:N({label:"\u653B\u6483\u56DE\u6570",dependsOn:{weaponBaseProperties:[d.DAMAGE_TYPE,d.ATTACKS_PER_ROUND,d.ATTACKS_PER_ROUND_ION],weaponEnhancementProperties:[R.INCREASE_ATTACKS_PER_ROUND]},update:({weaponBaseProperties:u,weaponEnhancementProperties:l},a)=>{const{damageType:n,attacksPerRound:e,attacksPerRoundIon:r}=u,{increaseAttacksPerRound:i}=l;return n.value===""||i.value===null?a:u.damageType.value==="energyDamageIon"?r.value===null?a:{...a,value:r.value+i.value,formula:{formula:`[${r.label}] + [${i.label}]`,filledFormula:`${r.value} + ${i.value}`}}:e.value===null?a:{...a,value:e.value+i.value,formula:{formula:`[${e.label}] + [${i.label}]`,filledFormula:`${e.value} + ${i.value}`}}}}),[c.SHOTS_PER_ATTACK]:N({label:"\u9023\u88C5\u6570",hidden:!0,dependsOn:{weaponBaseProperties:[d.DAMAGE_TYPE,d.SHOTS_PER_ATTACK,d.SHOTS_PER_ATTACK_ION]},update:({weaponBaseProperties:u},l)=>{const{damageType:a,shotsPerAttack:n,shotsPerAttackIon:e}=u;return a.value===""?l:u.damageType.value==="energyDamageIon"?e.value===null?l:{...l,value:e.value}:n.value===null?l:{...l,value:n.value}}}),[c.BATTLE_CYCLE_TIME]:N({label:"\u30E9\u30A6\u30F3\u30C9\u6642\u9593",unit:T.SECONDS,dependsOn:{shipProperties:[_.TYPE,_.FIGHTER_ATTACK_PATTERN,_.CORVETTE_ATTACK_PATTERN],outputProperties:[c.DURATION,c.COOLDOWN,c.LOCK_ON_TIME]},update:({shipProperties:u,outputProperties:l},a)=>{const{type:n,fighterAttackPattern:e,corvetteAttackPattern:r}=u,{duration:i,cooldown:o,lockOnTime:E}=l;return n.value===""||e.value===""||r.value===""||i.value===null||o.value===null?a:n.value==="fighter"&&e.value==="rtb"||n.value==="corvette"&&r.value==="rtb"?E.value===null?a:{...a,value:i.value+o.value+E.value,formula:{formula:`[${i.label}] + [${o.label}] + [${E.label}]`,filledFormula:`${A(i.value)} \u79D2 + ${A(o.value)} \u79D2 + ${A(E.value)} \u79D2`,description:"\u91CD\u8907\u653B\u6483\u3092\u884C\u3046\u8266\u8F09\u6A5F\u3067\u306F\u30ED\u30C3\u30AF\u30AA\u30F3\u6642\u9593\u3082\u30E9\u30A6\u30F3\u30C9\u6642\u9593\u306B\u542B\u307E\u308C\u307E\u3059"}}:{...a,value:i.value+o.value,formula:{formula:`[${i.label}] + [${o.label}]`,filledFormula:`${A(i.value)} + ${A(o.value)}`}}}}),[c.DAMAGE_PER_ROUND_IN_STATUS]:N({label:"\u30E9\u30A6\u30F3\u30C9\u30C0\u30E1\u30FC\u30B8",description:"\uFF11\u30E9\u30A6\u30F3\u30C9\u3042\u305F\u308A\u306E\u5408\u8A08\u30C0\u30E1\u30FC\u30B8\uFF08\u653B\u6483\u76EE\u6A19\u306E\u62B5\u6297\u5024/\u30B7\u30FC\u30EB\u30C9\u5024\u306F\u8003\u616E\u3057\u306A\u3044\u6570\u5024\uFF09",dependsOn:{shipProperties:[_.TYPE,_.SQUAD_SIZE],weaponBaseProperties:[d.INSTALLATION],outputProperties:[c.DAMAGE_PER_HIT_IN_STATUS,c.ATTACKS_PER_ROUND,c.SHOTS_PER_ATTACK]},update:({shipProperties:u,weaponBaseProperties:l,outputProperties:a},n)=>{const{type:e,squadSize:r}=u,{installation:i}=l,{damagePerHitInStatus:o,attacksPerRound:E,shotsPerAttack:s}=a;return e.value===""||i.value===null||o.value===null||E.value===null||s.value===null?n:e.value==="fighter"?r.value===null?n:{...n,value:r.value*o.value*i.value*E.value*s.value,formula:{formula:`[${r.label}] * [${o.label}] * [${i.label}] * [${E.label}] * [${s.label}]`,filledFormula:`${r.value} * ${A(o.value)} * ${i.value} * ${E.value} * ${s.value}`}}:{...n,value:o.value*i.value*E.value*s.value,formula:{formula:`[${o.label}] * [${i.label}] * [${E.label}] * [${s.label}]`,filledFormula:`${A(o.value)} * ${i.value} * ${E.value} * ${s.value}`}}}}),[c.DAMAGE_PER_ROUND_IN_BATTLE]:N({label:"\u30E9\u30A6\u30F3\u30C9\u30C0\u30E1\u30FC\u30B8\uFF08\u76EE\u6A19\u5225\uFF09",description:"\uFF11\u30E9\u30A6\u30F3\u30C9\u3042\u305F\u308A\u306E\u5408\u8A08\u30C0\u30E1\u30FC\u30B8\uFF08\u653B\u6483\u76EE\u6A19\u306E\u62B5\u6297\u5024/\u30B7\u30FC\u30EB\u30C9\u5024\u3092\u8003\u616E\u3057\u305F\u6570\u5024\uFF09",dependsOn:{shipProperties:[_.TYPE,_.SQUAD_SIZE],weaponBaseProperties:[d.INSTALLATION],outputProperties:[c.DAMAGE_PER_HIT_IN_BATTLE,c.ATTACKS_PER_ROUND,c.SHOTS_PER_ATTACK]},update:({shipProperties:u,weaponBaseProperties:l,outputProperties:a},n)=>{const{type:e,squadSize:r}=u,{installation:i}=l,{damagePerHitInBattle:o,attacksPerRound:E,shotsPerAttack:s}=a;return e.value===""||i.value===null||o.value===null||E.value===null||s.value===null?n:e.value==="fighter"?r.value===null?n:{...n,value:r.value*o.value*i.value*E.value*s.value,formula:{formula:`[${r.label}] * [${o.label}] * [${i.label}] * [${E.label}] * [${s.label}]`,filledFormula:`${r.value} * ${A(o.value)} * ${i.value} * ${E.value} * ${s.value}`}}:{...n,value:o.value*i.value*E.value*s.value,formula:{formula:`[${o.label}] * [${i.label}] * [${E.label}] * [${s.label}]`,filledFormula:`${A(o.value)} * ${i.value} * ${E.value} * ${s.value}`}}}}),[c.TIME_TO_DESTROY_TARGET]:N({label:"\u76EE\u6A19\u6483\u7834\u307E\u3067\u306E\u6642\u9593",description:"\u653B\u6483\u76EE\u6A19\u3092\u6483\u7834\u3059\u308B\u307E\u3067\u306E\u6642\u9593\u3067\u3059\u3002\u76EE\u6A19\u3092\u6483\u7834\u3057\u305F\u6700\u5F8C\u306E\u30E9\u30A6\u30F3\u30C9\u306E\u6301\u7D9A\u6642\u9593\u307E\u3067\u304C\u542B\u307E\u308C\u307E\u3059\u3002\u653B\u6483\u76EE\u6A19\u306E\u62B5\u6297\u5024/\u30B7\u30FC\u30EB\u30C9\u5024\u3092\u8003\u616E\u3057\u305F\u8A08\u7B97\u3067\u3059\u3002",unit:T.SECONDS,dependsOn:{targetProperties:[U.HP],outputProperties:[c.COOLDOWN,c.BATTLE_CYCLE_TIME,c.DAMAGE_PER_ROUND_IN_BATTLE]},update:({targetProperties:u,outputProperties:l},a)=>{const{hp:n}=u,{cooldown:e,battleCycleTime:r,damagePerRoundInBattle:i}=l;return n.value===null||e.value===null||r.value===null||i.value===null?a:{...a,value:Math.ceil(n.value/i.value)*r.value-e.value,formula:{formula:`ceil([${n.label}] / [${i.label}]) * [${r.label}] - [${e.label}]`,filledFormula:`ceil(${n.value} / ${A(i.value)}) * ${A(r.value)} - ${A(e.value)}`}}}}),[c.WEAPON_DPM_IN_STATUS]:N({label:"\u6B66\u88C5DPM",description:"\u6B66\u88C5\u306E\u8A73\u7D30\u753B\u9762\u306B\u8868\u793A\u3055\u308C\u3066\u3044\u308B\u6B66\u88C5DPM\u3067\u3059\uFF08\u653B\u6483\u76EE\u6A19\u306E\u62B5\u6297\u5024/\u30B7\u30FC\u30EB\u30C9\u5024\u306F\u8003\u616E\u3057\u306A\u3044\u6570\u5024\u3067\u3059\uFF09\u3002\u30B2\u30FC\u30E0\u5185\u306B\u8868\u793A\u3055\u308C\u308B\u6570\u5024\u3068\u6BD4\u8F03\u3057\u3066\u5408\u308F\u306A\u3044\u5834\u5408\u306F\u4E0A\u3067\u5165\u529B\u3057\u305F\u5404\u6570\u5024\u3092\u518D\u5EA6\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u6226\u95D8\u6A5F\u306E\u5834\u5408\u306F\uFF11\u6A5F\u5206\u306E\u6570\u5024\u3067\u3059\u3002",unit:T.DPM,dependsOn:{outputProperties:[c.DAMAGE_PER_ROUND_IN_STATUS,c.BATTLE_CYCLE_TIME]},update:({outputProperties:u},l)=>{const{damagePerRoundInStatus:a,battleCycleTime:n}=u;return a.value===null||n.value===null?l:{...l,value:a.value/n.value*60,formula:{formula:`[${a.label}] / [${n.label}] * 60`,filledFormula:`${A(a.value)} / ${A(n.value)} * 60`}}}}),[c.WEAPON_DPM_IN_BATTLE]:N({label:"\u6B66\u88C5DPM\uFF08\u76EE\u6A19\u5225\uFF09",description:"\u653B\u6483\u76EE\u6A19\u306E\u62B5\u6297\u5024/\u30B7\u30FC\u30EB\u30C9\u5024\u3092\u8003\u616E\u3057\u305F\u6B66\u88C5DPM\u3067\u3059\u3002\u6226\u95D8\u6A5F\u306E\u5834\u5408\u306F\uFF11\u6A5F\u5206\u306E\u6570\u5024\u3067\u3059\u3002",unit:T.DPM,dependsOn:{outputProperties:[c.DAMAGE_PER_ROUND_IN_BATTLE,c.BATTLE_CYCLE_TIME]},update:({outputProperties:u},l)=>{const{damagePerRoundInBattle:a,battleCycleTime:n}=u;return a.value===null||n.value===null?l:{...l,value:a.value/n.value*60,formula:{formula:`[${a.label}] / [${n.label}] * 60`,filledFormula:`${A(a.value)} / ${A(n.value)} * 60`}}}}),[c.SQUAD_WEAPON_DPM_IN_STATUS]:N({label:"\u7DE8\u968A\u5168\u4F53\u306E\u6B66\u88C5DPM",description:"\u7DE8\u968A\u5168\u4F53\u306E\u6B66\u88C5DPM\u3067\u3059\u3002\u653B\u6483\u76EE\u6A19\u306E\u62B5\u6297\u5024/\u30B7\u30FC\u30EB\u30C9\u5024\u306F\u8003\u616E\u3057\u306A\u3044\u6570\u5024\u3067\u3059\u3002",unit:T.DPM,dependsOn:{shipProperties:[_.TYPE,_.SQUAD_SIZE],outputProperties:[c.WEAPON_DPM_IN_STATUS]},update:({shipProperties:u,outputProperties:l},a)=>{const{type:n,squadSize:e}=u,{weaponDpmInStatus:r}=l;return n.value===""||e.value===null||r.value===null?a:n.value==="fighter"?e.value===null?a:{...a,value:e.value*r.value,formula:{formula:`[${e.label}] * [${r.label}]`,filledFormula:`${A(e.value)} * ${A(r.value)}`}}:a}}),[c.SQUAD_WEAPON_DPM_IN_BATTLE]:N({label:"\u7DE8\u968A\u5168\u4F53\u306E\u6B66\u88C5DPM\uFF08\u76EE\u6A19\u5225\uFF09",description:"\u7DE8\u968A\u5168\u4F53\u306E\u6B66\u88C5DPM\u3067\u3059\u3002\u653B\u6483\u76EE\u6A19\u306E\u62B5\u6297\u5024/\u30B7\u30FC\u30EB\u30C9\u5024\u3092\u8003\u616E\u3057\u305F\u6570\u5024\u3067\u3059\u3002",unit:T.DPM,dependsOn:{shipProperties:[_.TYPE,_.SQUAD_SIZE],outputProperties:[c.WEAPON_DPM_IN_BATTLE]},update:({shipProperties:u,outputProperties:l},a)=>{const{type:n,squadSize:e}=u,{weaponDpmInBattle:r}=l;return n.value===""||e.value===null||r.value===null?a:n.value==="fighter"?e.value===null?a:{...a,value:e.value*r.value,formula:{formula:`[${e.label}] * [${r.label}]`,filledFormula:`${A(e.value)} * ${A(r.value)}`}}:a}})})}function e0(u){const{shipProperties:l,weaponBaseProperties:a,enhancementTabs:n,attackTargetTabs:e,baseOutputProperties:r}=u,i={};return n.forEach(o=>{e.forEach(E=>{i[o.id]||(i[o.id]={}),i[o.id][E.id]=a0({shipProperties:l,weaponBaseProperties:a,weaponEnhancementProperties:o.properties,targetProperties:E.properties,outputProperties:r})})}),i}function a0(u){const{shipProperties:l,weaponBaseProperties:a,weaponEnhancementProperties:n,targetProperties:e,outputProperties:r}=u;return Object.values(c).map(i=>i).reduce((i,o)=>{const E=r[o];if(n0(E,{...u,outputProperties:i}))return{...i,[o]:t0(E)};if(E.type==="numeric"){const s=E;return{...i,[o]:s.update({shipProperties:l,weaponBaseProperties:a,weaponEnhancementProperties:n,targetProperties:e,outputProperties:i},s)}}return i},{...r})}function n0(u,l){if(!u.dependsOn)return!1;let a=!1;return u.dependsOn.weaponBaseProperties&&(a=a||!!u.dependsOn.weaponBaseProperties.find(n=>!X(l.weaponBaseProperties[n]))),u.dependsOn.weaponEnhancementProperties&&(a=a||!!u.dependsOn.weaponEnhancementProperties.find(n=>!X(l.weaponEnhancementProperties[n]))),u.dependsOn.targetProperties&&(a=a||!!u.dependsOn.targetProperties.find(n=>!X(l.targetProperties[n]))),u.dependsOn.outputProperties&&(a=a||!!u.dependsOn.outputProperties.find(n=>!l0(l.outputProperties[n]))),a}function X(u){switch(u.type){case"numeric":return u.value!==null;case"select":return!!u.value;default:throw new Error(`Cannot determine whether "${u.label}" is set`)}}function l0(u){switch(u.type){case"numeric":return u.value!==null;default:throw new Error(`Cannot determine whether "${u.label}" is set, unsupported property type`)}}function t0(u){switch(u.type){case"numeric":{const l=u;return{...l,value:null,formula:l.formula?{...l.formula,filledFormula:null,description:void 0}:void 0}}default:throw new Error(`Cannot reset "${u.label}", unsupported property type`)}}function N(u){return{type:"numeric",id:"[id]",label:"[label]",value:null,update:(l,a)=>a,...u}}function uu(u,l,a){var n,e,r,i,o,E,s,B;return((r=(e=(n=u.dependsOn)==null?void 0:n[l])==null?void 0:e.length)!=null?r:0)>0?!0:((E=(o=(i=u.dependsOn)==null?void 0:i.outputProperties)==null?void 0:o.length)!=null?E:0)>0?!!((B=(s=u.dependsOn)==null?void 0:s.outputProperties)!=null&&B.find(C=>uu(a[C],l,a))):!1}const V=u=>{var e,r;const{property:l}=u,a=(()=>{if(!l)return"-";if(l.type==="numeric"){const i=l.value;if(i===null)return"-";const o=l.unit;return o?`${A(i)} ${Tu(o)}`:A(i)}return"?"})(),n=t(h,{component:"span",variant:"body2",color:"text.secondary",children:a});return((e=l==null?void 0:l.formula)==null?void 0:e.formula)&&((r=l==null?void 0:l.formula)==null?void 0:r.filledFormula)?t(Uu,{title:F(O,{spacing:1,children:[t(h,{variant:"body2",children:`[${l.label}]`}),t(L,{}),t(h,{variant:"body2",children:`= ${l.formula.formula}`}),t(L,{}),Array.isArray(l.formula.filledFormula)?t(S,{children:l.formula.filledFormula.map((i,o)=>F(D.exports.Fragment,{children:[t(h,{variant:"body2",children:`= ${i}`}),t(L,{})]},`filledFormula_${o}`))}):F(S,{children:[t(h,{variant:"body2",children:`= ${l.formula.filledFormula}`}),t(L,{})]}),t(h,{variant:"body2",children:`= ${a}`}),l.formula.description&&F(S,{children:[t(L,{}),t(h,{variant:"body2",children:l.formula.description})]})]}),children:n}):n},r0=u=>{const{shipProperties:l,weaponBaseProperties:a,enhancementTabs:n,attackTargetTabs:e}=u,r=D.exports.useMemo(()=>u0(),[]),i=D.exports.useMemo(()=>e0({shipProperties:l,weaponBaseProperties:a,enhancementTabs:n,attackTargetTabs:e,baseOutputProperties:r}),[l,a,n,e,r]);return F(S,{children:[n.length===1&&e.length===1&&t(eu,{sx:{alignItems:"center"},rows:Object.values(r).filter(o=>o.hidden!==!0).map(o=>({key:o.id,label:o.label,value:(()=>{var s,B;const E=(B=(s=i[n[0].id])==null?void 0:s[e[0].id])==null?void 0:B[o.id];return F(O,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[t(V,{property:E!=null?E:null}),(E==null?void 0:E.description)&&t(q,{title:E.label,text:E.description})]})})()}))}),(n.length>1||e.length>1)&&Object.values(r).filter(o=>o.hidden!==!0).map(o=>{var I,f,P;const E=uu(o,"weaponEnhancementProperties",r),s=uu(o,"targetProperties",r),B=E&&n.length>1,C=B&&s&&e.length>1,m=!B&&s&&e.length>1;return F(g,{component:"div",pb:6,children:[t(g,{component:"div",pb:2,children:F(O,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[t(h,{variant:"body1",children:o.label}),o.description&&t(q,{title:o.label,text:o.description})]})}),B&&t(g,{component:"div",pl:2,children:t(tu,{component:M,sx:{width:"fit-content"},children:F(ru,{size:"small",sx:{width:"fit-content"},children:[t(iu,{children:F(K,{children:[C&&t(w,{children:""}),n.map((p,v)=>t(w,{children:t(h,{variant:"body2",color:"text.secondary",children:p.name||p.defaultName(v)})},p.id))]})}),t(ou,{children:(C?e:[e[0]]).map((p,v)=>F(K,{children:[C&&t(w,{children:t(h,{variant:"body2",color:"text.secondary",children:p.name||p.defaultName(v)})}),n.map($=>{var x,k,G;return t(w,{children:t(V,{property:(G=(k=(x=i[$.id])==null?void 0:x[p.id])==null?void 0:k[o.id])!=null?G:null})},$.id)})]},p.id))})]})})}),!B&&m&&t(g,{component:"div",pl:2,children:t(tu,{component:M,sx:{width:"fit-content"},children:F(ru,{size:"small",sx:{width:"fit-content"},children:[t(iu,{children:t(K,{children:e.map((p,v)=>t(w,{children:t(h,{variant:"body2",color:"text.secondary",children:p.name||p.defaultName(v)})},p.id))})}),t(ou,{children:t(K,{children:e.map(p=>{var v,$,x;return t(w,{children:t(V,{property:(x=($=(v=i[n[0].id])==null?void 0:v[p.id])==null?void 0:$[o.id])!=null?x:null})},p.id)})})})]})})}),!B&&!m&&t(g,{component:"div",pl:2,children:t(V,{property:(P=(f=(I=i[n[0].id])==null?void 0:I[e[0].id])==null?void 0:f[o.id])!=null?P:null})})]},o.id)})]})},b0=()=>{const[u,l]=D.exports.useState(()=>Lu()),[a,n]=D.exports.useState(()=>Hu()),{tabIndex:e,canAddTab:r,tabs:i,setTabIndex:o,addTab:E,removeTab:s,renameTab:B,changeProperty:C}=Au({idPrefix:"enhancementTab",tabNamePrefix:"\u30B9\u30AD\u30EB\u8A2D\u5B9A",propertyFactoryFn:ku}),{tabIndex:m,canAddTab:I,tabs:f,setTabIndex:P,addTab:p,removeTab:v,renameTab:$,changeProperty:x}=Au({idPrefix:"attackTargetTab",tabNamePrefix:"\u653B\u6483\u76EE\u6A19",propertyFactoryFn:Gu}),k=D.exports.useCallback(y=>{l(Q=>({...Q,[y.id]:y}))},[]),G=D.exports.useCallback(y=>{n(Q=>({...Q,[y.id]:y}))},[]);return F(S,{children:[t(Ou,{currentRoute:"/dpmCalc"}),t(gu,{children:t(g,{component:"div",p:1,children:F(O,{pt:1,spacing:4,children:[t(h,{variant:"body2",children:"\u3053\u3061\u3089\u306EDPM\u8A08\u7B97\u6A5F\u3067\u306F\u8907\u6570\u306E\u30B9\u30AD\u30EB\u8A2D\u5B9A\u3092\u540C\u6642\u306B\u8907\u6570\u306E\u653B\u6483\u76EE\u6A19\u306B\u5BFE\u3057\u3066\u6BD4\u8F03\u3067\u304D\u307E\u3059\u3002"}),F(O,{spacing:1,children:[t(h,{variant:"body1",children:"\u8266\u8239\u60C5\u5831"}),t(M,{children:t(g,{component:"div",p:1,children:t(su,{properties:u,onChange:k,isVisibleProperty:Ku})})})]}),F(O,{spacing:1,children:[t(h,{variant:"body1",children:"\u6B66\u88C5\u60C5\u5831\uFF08\u521D\u671F\u30B9\u30C6\u30FC\u30BF\u30B9\uFF09"}),t(M,{children:t(g,{component:"div",p:1,children:t(su,{properties:a,onChange:G,isVisibleProperty:Yu})})})]}),F(O,{spacing:1,children:[t(h,{variant:"body1",children:"\u30B9\u30AD\u30EB"}),t(M,{children:t(Cu,{idPrefix:"enhancementTab",tabs:i,tabIndex:e,canAddTab:r,addTab:E,removeTab:s,renameTab:B,changeProperty:C,setTabIndex:o})})]}),F(O,{spacing:1,children:[t(h,{variant:"body1",children:"\u653B\u6483\u76EE\u6A19"}),t(M,{children:t(Cu,{idPrefix:"attackTargetTab",tabs:f,tabIndex:m,canAddTab:I,addTab:p,removeTab:v,renameTab:$,changeProperty:x,setTabIndex:P})})]}),F(O,{spacing:1,children:[t(h,{variant:"body1",children:"\u8A08\u7B97\u7D50\u679C"}),t(M,{children:t(g,{component:"div",p:1,children:t(r0,{shipProperties:u,weaponBaseProperties:a,enhancementTabs:i,attackTargetTabs:f})})})]}),F(wu,{severity:"warning",children:[t(yu,{children:"\u73FE\u5728\u3053\u306E\u8A08\u7B97\u6A5F\u3067\u306F\u300C\u547D\u4E2D\u7387\u300D\u3068\u300C\u56DE\u907F\u7387\u300D\u3092\u542B\u307E\u306A\u3044\u8A08\u7B97\u3092\u3057\u3066\u3044\u307E\u3059\u3002"}),"\u547D\u4E2D\u7387\u3068\u56DE\u907F\u7387\u3092\u542B\u3081\u305F\u8A08\u7B97\u3092\u884C\u3046\u5834\u5408\u3001\u30B2\u30FC\u30E0\u5185\u3067\u306F\u898B\u308C\u306A\u3044\u96A0\u3057\u30B9\u30C6\u30FC\u30BF\u30B9\u3092\u8907\u6570\u63C3\u3048\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002\u6B66\u5668\u6BCE\u306B\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u308B\u300C\u653B\u6483\u76EE\u6A19\u306E\u8266\u7A2E\u5225\u306E\u57FA\u790E\u547D\u4E2D\u7387\u300D\u3068\u300C\u5BFE\u8266/\u5BFE\u7A7A/\u653B\u57CE\u57FA\u790E\u547D\u4E2D\u7387\u300D\u304C\u4E0D\u8DB3\u3057\u3066\u3044\u307E\u3059\u3002\u5165\u624B\u65B9\u6CD5\u304C\u96E3\u3057\u304F\u3001\u6B66\u5668\u306E\u69CB\u6210\u6B21\u7B2C\u3067\u306F\u9006\u7B97\u3067\u304D\u306A\u3044\u5834\u5408\u3082\u3042\u308A\u307E\u3059\u3002\u4ECA\u5F8C\u3053\u308C\u3089\u306E\u96A0\u3057\u30B9\u30C6\u30FC\u30BF\u30B9\u3092\u5FC5\u8981\u3068\u3057\u306A\u3044\u7C21\u7565\u5316\u3057\u305F\u8A08\u7B97\u5F0F\u3092\u4F7F\u3046\u300C\u30CE\u30FC\u30DE\u30EB\u30E2\u30FC\u30C9\u300D\u3068\u5168\u3066\u306E\u96A0\u3057\u30B9\u30C6\u30FC\u30BF\u30B9\u3092\u5165\u529B\u3067\u304D\u308B\u300C\u30A8\u30AD\u30B9\u30D1\u30FC\u30C8\u30E2\u30FC\u30C9\u300D\u3092\u5206\u3051\u3066\u5B9F\u88C5\u3059\u308B\u4E88\u5B9A\u3067\u3059\u3002"]})]})})}),t(Ru,{})]})};export{b0 as DpmCalcPage,b0 as default};
