import{C as pe,D as me,E as fe,L as ge,_ as A,r as v,P as Se,H as be,J as ye,k as r,K as ve,ai as Ce,bv as Oe,bw as J,bx as ee,m as _e,by as De,g as x,w as Le,bh as Te,bf as xe,a1 as $,a3 as P,a2 as V,Y as Be,bg as Ge,bz as ze,c as M,aw as Ue,t as h,j as b,v as w,T as g,aA as L,a7 as te,a8 as re,a9 as ae,aI as Ve,u as He,bA as je,bB as qe,F as B,bC as X,f as Ke,b as Je,Q as Fe,R as we,U as Re,ac as W,B as $e,bs as Ye,av as k,br as Ze,x as O,ab as Qe}from"./index.516fae83.js";import{N as Xe,P as et}from"./PageContent.dbee26c0.js";import{u as tt,T as rt}from"./useTable.585c4215.js";import{E as at}from"./ExpandStack.81dcc75c.js";import{T as G}from"./Tooltip.6b322d64.js";import{T as nt,a as de}from"./ToggleButtonGroup.db85a170.js";import{F as z,I as K,S as U}from"./Select.e783d7e7.js";import{a as T}from"./MenuItem.60c70457.js";import{R as it}from"./ResponsiveDialog.a1b188f8.js";import{P as st}from"./PageFooter.9e38da3a.js";import"./TableRow.aba669e0.js";import"./Popper.a02fd95d.js";import"./useFormControl.0bc2ca19.js";function lt(e){return pe("MuiListSubheader",e)}me("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const ot=["className","color","component","disableGutters","disableSticky","inset"],ct=e=>{const{classes:t,color:n,disableGutters:s,inset:i,disableSticky:o}=e,c={root:["root",n!=="default"&&`color${ge(n)}`,!s&&"gutters",i&&"inset",!o&&"sticky"]};return ye(c,lt,t)},dt=fe("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${ge(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>A({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),ut=v.exports.forwardRef(function(t,n){const s=Se({props:t,name:"MuiListSubheader"}),{className:i,color:o="default",component:c="li",disableGutters:p=!1,disableSticky:m=!1,inset:f=!1}=s,S=be(s,ot),a=A({},s,{color:o,component:c,disableGutters:p,disableSticky:m,inset:f}),l=ct(a);return r(dt,A({as:c,className:ve(l.root,i),ref:n,ownerState:a},S))});var Y=ut;const ht=v.exports.createContext();var ue=ht;function pt(e){return pe("MuiGrid",e)}const mt=[0,1,2,3,4,5,6,7,8,9,10],ft=["column-reverse","column","row-reverse","row"],gt=["nowrap","wrap-reverse","wrap"],_=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],H=me("MuiGrid",["root","container","item","zeroMinWidth",...mt.map(e=>`spacing-xs-${e}`),...ft.map(e=>`direction-xs-${e}`),...gt.map(e=>`wrap-xs-${e}`),..._.map(e=>`grid-xs-${e}`),..._.map(e=>`grid-sm-${e}`),..._.map(e=>`grid-md-${e}`),..._.map(e=>`grid-lg-${e}`),..._.map(e=>`grid-xl-${e}`)]),St=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function N(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function bt({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((s,i)=>{let o={};if(t[i]&&(n=t[i]),!n)return s;if(n===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const c=J({values:t.columns,breakpoints:e.breakpoints.values}),p=typeof c=="object"?c[i]:c;if(p==null)return s;const m=`${Math.round(n/p*1e8)/1e6}%`;let f={};if(t.container&&t.item&&t.columnSpacing!==0){const S=e.spacing(t.columnSpacing);if(S!=="0px"){const a=`calc(${m} + ${N(S)})`;f={flexBasis:a,maxWidth:a}}}o=A({flexBasis:m,flexGrow:0,maxWidth:m},f)}return e.breakpoints.values[i]===0?Object.assign(s,o):s[e.breakpoints.up(i)]=o,s},{})}function yt({theme:e,ownerState:t}){const n=J({values:t.direction,breakpoints:e.breakpoints.values});return ee({theme:e},n,s=>{const i={flexDirection:s};return s.indexOf("column")===0&&(i[`& > .${H.item}`]={maxWidth:"none"}),i})}function Pe({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(i=>{n===""&&t[i]!==0&&(n=i)});const s=Object.keys(e).sort((i,o)=>e[i]-e[o]);return s.slice(0,s.indexOf(n))}function vt({theme:e,ownerState:t}){const{container:n,rowSpacing:s}=t;let i={};if(n&&s!==0){const o=J({values:s,breakpoints:e.breakpoints.values});let c;typeof o=="object"&&(c=Pe({breakpoints:e.breakpoints.values,values:o})),i=ee({theme:e},o,(p,m)=>{var f;const S=e.spacing(p);return S!=="0px"?{marginTop:`-${N(S)}`,[`& > .${H.item}`]:{paddingTop:N(S)}}:(f=c)!=null&&f.includes(m)?{}:{marginTop:0,[`& > .${H.item}`]:{paddingTop:0}}})}return i}function Ct({theme:e,ownerState:t}){const{container:n,columnSpacing:s}=t;let i={};if(n&&s!==0){const o=J({values:s,breakpoints:e.breakpoints.values});let c;typeof o=="object"&&(c=Pe({breakpoints:e.breakpoints.values,values:o})),i=ee({theme:e},o,(p,m)=>{var f;const S=e.spacing(p);return S!=="0px"?{width:`calc(100% + ${N(S)})`,marginLeft:`-${N(S)}`,[`& > .${H.item}`]:{paddingLeft:N(S)}}:(f=c)!=null&&f.includes(m)?{}:{width:"100%",marginLeft:0,[`& > .${H.item}`]:{paddingLeft:0}}})}return i}function Tt(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const s=[];return t.forEach(i=>{const o=e[i];Number(o)>0&&s.push(n[`spacing-${i}-${String(o)}`])}),s}const xt=fe("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:s,direction:i,item:o,spacing:c,wrap:p,zeroMinWidth:m,breakpoints:f}=n;let S=[];s&&(S=Tt(c,f,t));const a=[];return f.forEach(l=>{const u=n[l];u&&a.push(t[`grid-${l}-${String(u)}`])}),[t.root,s&&t.container,o&&t.item,m&&t.zeroMinWidth,...S,i!=="row"&&t[`direction-xs-${String(i)}`],p!=="wrap"&&t[`wrap-xs-${String(p)}`],...a]}})(({ownerState:e})=>A({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),yt,vt,Ct,bt);function Ft(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(s=>{const i=e[s];if(Number(i)>0){const o=`spacing-${s}-${String(i)}`;n.push(o)}}),n}const wt=e=>{const{classes:t,container:n,direction:s,item:i,spacing:o,wrap:c,zeroMinWidth:p,breakpoints:m}=e;let f=[];n&&(f=Ft(o,m));const S=[];m.forEach(l=>{const u=e[l];u&&S.push(`grid-${l}-${String(u)}`)});const a={root:["root",n&&"container",i&&"item",p&&"zeroMinWidth",...f,s!=="row"&&`direction-xs-${String(s)}`,c!=="wrap"&&`wrap-xs-${String(c)}`,...S]};return ye(a,pt,t)},Rt=v.exports.forwardRef(function(t,n){const s=Se({props:t,name:"MuiGrid"}),{breakpoints:i}=Ce(),o=Oe(s),{className:c,columns:p,columnSpacing:m,component:f="div",container:S=!1,direction:a="row",item:l=!1,rowSpacing:u,spacing:y=0,wrap:C="wrap",zeroMinWidth:F=!1}=o,d=be(o,St),R=u||y,ke=m||y,Ee=v.exports.useContext(ue),se=S?p||12:Ee,le={},oe=A({},d);i.keys.forEach(q=>{d[q]!=null&&(le[q]=d[q],delete oe[q])});const ce=A({},o,{columns:se,container:S,direction:a,item:l,rowSpacing:R,columnSpacing:ke,wrap:C,zeroMinWidth:F,spacing:y},le,{breakpoints:i.keys}),Ne=wt(ce);return r(ue.Provider,{value:se,children:r(xt,A({ownerState:ce,className:ve(Ne.root,c),as:f,ref:n},oe))})});var I=Rt,j=(e=>(e.ONE="one",e.TWO_PLUS="twoPlus",e))(j||{});function $t(e){return _e.filter(t=>{var n;return e===j.ONE&&((n=t.tags)==null?void 0:n.includes(De.PHASE_TWO_BLUEPRINT))?!1:!!t.researchManufacturer||!!t.researchStrategyTypes||!!t.researchTacticTypes})}function Pt(e,t){const n=[],s=[],i=[],o=[];return e.forEach(c=>{const p=Le(c,t);if(p.length>0){s.push({shipDefinition:c,modules:p});return}if(Te(c.id,t)){i.push(c);return}if(xe(c.id,t)){n.push(c);return}o.push(c)}),{wantedShips:n.sort((c,p)=>x(c).localeCompare(x(p))),shipsWithWantedModule:s.sort((c,p)=>x(c.shipDefinition).localeCompare(x(p.shipDefinition))),possessedShips:i.sort((c,p)=>x(c).localeCompare(x(p))),remainingShips:o.sort((c,p)=>x(c).localeCompare(x(p)))}}function Mt(){const e=[$.NOMA_SHIPPING_GROUP,$.JUPITER_INDUSTRIES,$.ANTONIOS_CONSORTIUM,$.DAWN_ACCORD,null],t=[P.OUTSTANDING_FIREPOWER,P.SUSTAINED_COMBAT,P.STRATEGY_AND_SUPPORT,P.FIGHTER_AND_CORVETTE,null],n=[V.PROJECTILE_WEAPONS,V.DIRECT_FIRE_WEAPONS,null];return e.flatMap(s=>n.flatMap(i=>t.map(o=>({shipId:null,manufacturerFilter:s,strategyTypeFilter:o,tacticTypeFilter:i}))))}let It=0;function At(e,t,n){const s=t.filter(u=>!(e.manufacturerFilter!==null&&u.researchManufacturer!==e.manufacturerFilter||e.strategyTypeFilter!==null&&u.researchStrategyTypes&&!u.researchStrategyTypes.includes(e.strategyTypeFilter)||e.tacticTypeFilter!==null&&u.researchTacticTypes&&!u.researchTacticTypes.includes(e.tacticTypeFilter))),i=s.reduce((u,y)=>u+y.weight,0),o=s.map(u=>{const y=Te(u.id,n),C=u.weight/i,F=Be(u,n);return{shipDefinition:u,chance:C,formula:`${u.weight} / ${i}`,possessed:y,wished:xe(u.id,n),unwished:Ge(u.id,n),modules:F.map(d=>({module:d,chance:C/F.length,formula:`${Et(C)} / ${F.length}`,wished:ze(d.id,u.id,n)}))}});let c=0,p=0,m=0,f=0,S=0;o.forEach(u=>{if(u.possessed){if(u.modules.length>0){p+=u.chance,u.modules.find(y=>y.wished)&&(m+=u.chance);return}S+=u.chance;return}else{c+=u.chance,u.wished&&(m+=u.chance),u.unwished&&(f+=u.chance);return}});const l=[M.FIGHTER,M.CORVETTE,M.FRIGATE,M.DESTROYER,M.CRUISER,M.BATTLE_CRUISER,M.AUXILIARY,M.CARRIER].map(u=>({shipType:u,chance:o.filter(y=>y.shipDefinition.type===u).map(y=>y.chance).reduce((y,C)=>y+C,0)})).filter(u=>u.chance>0);return{id:`${It++}`,filterState:e,shipChances:o,shipTypeChances:l,totalShipChance:c,totalModuleChance:p,wishedShipChance:m,unwishedShipChance:f,techPointChance:S}}function Wt(e){var t,n,s;return`${(t=e.manufacturerFilter)!=null?t:"null"}.${(n=e.strategyTypeFilter)!=null?n:"null"}.${(s=e.tacticTypeFilter)!=null?s:"null"}`}function kt(e,t){if(t.shipId!==null)return e.filter(i=>!i.filterState.manufacturerFilter&&!i.filterState.strategyTypeFilter&&!i.filterState.tacticTypeFilter?!1:i.shipChances.find(o=>o.shipDefinition.id===t.shipId)).sort((i,o)=>{var m,f,S,a;const c=(f=(m=i.shipChances.find(l=>l.shipDefinition.id===t.shipId))==null?void 0:m.chance)!=null?f:0;return((a=(S=o.shipChances.find(l=>l.shipDefinition.id===t.shipId))==null?void 0:S.chance)!=null?a:0)-c});const n=[],s=e.filter(i=>t.manufacturerFilter!==null&&i.filterState.manufacturerFilter!==t.manufacturerFilter||t.strategyTypeFilter!==null&&i.filterState.strategyTypeFilter!==t.strategyTypeFilter||t.tacticTypeFilter!==null&&i.filterState.tacticTypeFilter!==t.tacticTypeFilter||!i.filterState.manufacturerFilter&&!i.filterState.strategyTypeFilter&&!i.filterState.tacticTypeFilter?!1:i.filterState.manufacturerFilter===t.manufacturerFilter&&i.filterState.strategyTypeFilter===t.strategyTypeFilter&&i.filterState.tacticTypeFilter===t.tacticTypeFilter?(n.push(i),!1):i);return[...n,...s]}function Et(e){return`${Number((e*100).toFixed(3))} %`}const Nt=e=>{const{configurations:t,filterState:n,onClickConfiguration:s}=e,{table:i,setTableData:o}=tt(),c=Ce(),m=Ue(c.breakpoints.down("sm"))?"38px":"50px",f=n.shipId;return v.exports.useEffect(()=>{const S={columns:[{id:"filter",renderHeader:()=>h("label.researchDirection"),renderCell:a=>b(w,{component:"div",sx:{minWidth:"120px"},children:[a.filterState.manufacturerFilter&&r(g,{variant:"body2",children:r(L,{onClick:()=>s(a),children:te(a.filterState.manufacturerFilter)})}),a.filterState.tacticTypeFilter&&r(g,{variant:"body2",children:r(L,{onClick:()=>s(a),children:re(a.filterState.tacticTypeFilter)})}),a.filterState.strategyTypeFilter&&r(g,{variant:"body2",children:r(L,{onClick:()=>s(a),children:ae(a.filterState.strategyTypeFilter)})}),!a.filterState.manufacturerFilter&&!a.filterState.strategyTypeFilter&&!a.filterState.tacticTypeFilter&&r(g,{variant:"body2",children:r(L,{onClick:()=>s(a),children:h("label.notSelected")})})]})},...f?[{id:"selectedShipChance",renderHeader:()=>h("label.selectedShip"),renderCell:a=>r(w,{component:"div",sx:{minWidth:m},children:r(g,{variant:"body2",children:E(Z(a,f))})}),sortFn:[(a,l)=>Z(a,f)-Z(l,f),(a,l)=>a.totalShipChance-l.totalShipChance,(a,l)=>l.techPointChance-a.techPointChance,(a,l)=>a.wishedShipChance-l.wishedShipChance,(a,l)=>l.unwishedShipChance-a.unwishedShipChance]}]:[],{id:"totalShipChance",renderHeader:()=>h("label.newShip"),renderCell:a=>r(w,{component:"div",sx:{minWidth:m},children:r(g,{variant:"body2",children:E(a.totalShipChance)})}),sortFn:[(a,l)=>a.totalShipChance-l.totalShipChance,(a,l)=>l.techPointChance-a.techPointChance,(a,l)=>a.wishedShipChance-l.wishedShipChance,(a,l)=>l.unwishedShipChance-a.unwishedShipChance]},{id:"totalModuleChance",renderHeader:()=>h("label.additionalSystemModule"),renderCell:a=>r(w,{component:"div",sx:{minWidth:m},children:r(g,{variant:"body2",children:E(a.totalModuleChance)})}),sortFn:[(a,l)=>a.totalModuleChance-l.totalModuleChance,(a,l)=>a.totalShipChance-l.totalShipChance,(a,l)=>l.techPointChance-a.techPointChance,(a,l)=>a.wishedShipChance-l.wishedShipChance,(a,l)=>l.unwishedShipChance-a.unwishedShipChance]},{id:"techPointChance",renderHeader:()=>h("label.techPoints"),renderCell:a=>r(w,{component:"div",sx:{minWidth:m},children:r(g,{variant:"body2",children:E(a.techPointChance)})}),sortFn:[(a,l)=>a.techPointChance-l.techPointChance,(a,l)=>l.totalShipChance-a.totalShipChance,(a,l)=>l.wishedShipChance-a.wishedShipChance,(a,l)=>a.unwishedShipChance-l.unwishedShipChance]},{id:"wishedShipChance",renderHeader:()=>h("label.wantedBlueprint"),renderCell:a=>r(w,{component:"div",sx:{minWidth:m},children:r(g,{variant:"body2",children:E(a.wishedShipChance)})}),sortFn:[(a,l)=>a.wishedShipChance-l.wishedShipChance,(a,l)=>l.techPointChance-a.techPointChance,(a,l)=>a.totalShipChance-l.totalShipChance,(a,l)=>l.unwishedShipChance-a.unwishedShipChance]},{id:"unwishedShipChance",renderHeader:()=>h("label.unwantedBlueprint"),renderCell:a=>r(w,{component:"div",sx:{minWidth:m},children:r(g,{variant:"body2",children:E(a.unwishedShipChance)})}),sortFn:[(a,l)=>a.unwishedShipChance-l.unwishedShipChance,(a,l)=>l.totalShipChance-a.totalShipChance,(a,l)=>l.wishedShipChance-a.wishedShipChance,(a,l)=>a.techPointChance-l.techPointChance]}],data:t,rowIdFn:a=>Wt(a.filterState)};o(S)},[o,t,f,s,m]),r(rt,{table:i,size:"small"})};function E(e){return`${Number((e*100).toFixed(2))} %`}function Z(e,t){var n,s;return(s=(n=e.shipChances.find(i=>i.shipDefinition.id===t))==null?void 0:n.chance)!=null?s:0}const Ot=e=>{const{shipDefinition:t}=e,{openShipDetailDialog:n}=Ve();return r(g,{variant:"body2",component:"span",children:r(L,{onClick:()=>{n(t.id)},children:x(t)})})},Q={[$.JUPITER_INDUSTRIES]:35,[$.NOMA_SHIPPING_GROUP]:35,[$.ANTONIOS_CONSORTIUM]:40,[$.DAWN_ACCORD]:25,[P.OUTSTANDING_FIREPOWER]:55,[P.SUSTAINED_COMBAT]:50,[P.STRATEGY_AND_SUPPORT]:55,[P.FIGHTER_AND_CORVETTE]:60,[V.PROJECTILE_WEAPONS]:45,[V.DIRECT_FIRE_WEAPONS]:40};function _t(e){const t=Dt(e);return h("label.daysAndHours",{days:Math.floor(t/24),hours:Math.round(t%24)})}function Dt(e){var o,c,p;const t=[...e.manufacturerFilter?[e.manufacturerFilter]:[],...e.tacticTypeFilter?[e.tacticTypeFilter]:[],...e.strategyTypeFilter?[e.strategyTypeFilter]:[]],n=t[0]&&(o=Q[t[0]])!=null?o:0,s=t[1]&&(c=Q[t[1]])!=null?c:0,i=t[2]&&(p=Q[t[2]])!=null?p:0;return t.length===3?n+(n+s)+n*s*i/250:t.length===2?n+(n+s):n}const Me=e=>{const{configuration:t}=e,{userSettings:n}=He();return r(je,{rows:[{key:`${t.id}.wishedShipChance`,label:h("label.wantedBlueprint"),value:D(t.wishedShipChance),separatorAfter:!0},...t.techPointChance>0?[{key:`${t.id}.techPointChance`,label:r(g,{variant:"body2",sx:t.techPointChance>0?{color:"red"}:void 0,children:h("label.techPoints")}),value:r(g,{variant:"body2",sx:t.techPointChance>0?{color:"red"}:void 0,children:D(t.techPointChance)}),separatorAfter:!0}]:[],...t.shipChances.flatMap(s=>{const i=s.possessed&&s.modules.length>0,o=s.wished||qe(s.shipDefinition.id,n);return[{key:`${t.id}.${s.shipDefinition.id}`,label:b(B,{children:[r(Ot,{shipDefinition:s.shipDefinition}),X()&&r("span",{children:"\xA0"}),i&&r(g,{variant:"body2",component:"span",children:h("label.additionalSystemModuleBrackets")}),!i&&s.possessed&&r(g,{variant:"body2",component:"span",children:h("label.techPointsBrackets")}),o&&r(G,{arrow:!0,disableFocusListener:!0,title:`${h("label.wantedBlueprint")}`,children:r(g,{variant:"body2",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})})]}),value:r(G,{arrow:!0,disableFocusListener:!0,title:b(B,{children:[r(g,{variant:"body2",gutterBottom:!0,children:`[${h("label.probabilityWeight")}] / [${h("label.total")}]`}),r(g,{variant:"body2",children:s.formula})]}),children:r(g,{variant:"body2",sx:{color:!i&&s.possessed?"red":void 0},children:D(s.chance)})})},...i?s.modules.map(c=>({key:`${t.id}.${s.shipDefinition.id}.${c.module.id}`,label:b(B,{children:[r(g,{variant:"body2",component:"span",color:"text.secondary",sx:{opacity:.5},children:"\u2517"}),X()&&r("span",{children:"\xA0"}),r(g,{variant:"body2",component:"span",color:"text.secondary",children:`${c.module.category}${c.module.categoryNumber} ${Ke(s.shipDefinition.id,c.module)}`}),c.wished&&r(G,{arrow:!0,disableFocusListener:!0,title:`${h("label.wantedAdditionalSystemModule")}`,children:r(g,{variant:"body2",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})})]}),value:r(G,{arrow:!0,disableFocusListener:!0,title:b(B,{children:[r(g,{variant:"body2",gutterBottom:!0,children:`[${h("label.shipProbability")}] / [${h("label.remainingAdditionalSystemModules")}]`}),r(g,{variant:"body2",children:c.formula})]}),children:r(g,{variant:"body2",color:"text.secondary",children:D(c.chance)})})})):[]]}),...t.shipTypeChances.map((s,i)=>({key:`${t.id}.${s.shipType}`,label:Je(s.shipType),value:D(s.chance,1),separatorBefore:i===0})),{key:`${t.id}.duration`,label:h("researchAgreement.researchTime"),value:_t(t.filterState),separatorBefore:!0}],rowGap:1})};function D(e,t=3){return`${Number((e*100).toFixed(t))} %`}const Ie=e=>{var s,i;const{configuration:t,filterState:n}=e;return b(g,{variant:"body2",children:[[...t.filterState.manufacturerFilter!==null?[te(t.filterState.manufacturerFilter)]:[],...t.filterState.tacticTypeFilter!==null?[re(t.filterState.tacticTypeFilter)]:[],...t.filterState.strategyTypeFilter!==null?[ae(t.filterState.strategyTypeFilter)]:[],...!t.filterState.manufacturerFilter&&!t.filterState.strategyTypeFilter&&!t.filterState.tacticTypeFilter?[h("label.notSelected")]:[]].map(o=>`\u300C${o}\u300D`).join("+"),n.shipId===null&&t.wishedShipChance>0&&r(G,{arrow:!0,disableFocusListener:!0,title:`${h("label.probabilityForWantedBlueprintColon")}${he(t.wishedShipChance)}`,children:r(g,{variant:"body2",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})}),n.shipId!==null&&r(g,{variant:"body2",component:"span",children:`\u3000\u21D2\u3000${he((i=(s=t.shipChances.find(o=>o.shipDefinition.id===n.shipId))==null?void 0:s.chance)!=null?i:0)}`})]})};function he(e){return`${Number((e*100).toFixed(3))} %`}const Lt=e=>{const{configurations:t,filterState:n}=e,s=!!n.manufacturerFilter||!!n.strategyTypeFilter||!!n.tacticTypeFilter;return r(at,{expandables:t.map(i=>({id:i.id,initiallyOpened:s,summary:r(Ie,{configuration:i,filterState:n}),details:r(Me,{configuration:i})})),unmount:!0})};var ne={},Bt=we.exports;Object.defineProperty(ne,"__esModule",{value:!0});var Ae=ne.default=void 0,Gt=Bt(Fe),zt=Re,Ut=(0,Gt.default)((0,zt.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree");Ae=ne.default=Ut;var ie={},Vt=we.exports;Object.defineProperty(ie,"__esModule",{value:!0});var We=ie.default=void 0,Ht=Vt(Fe),jt=Re,qt=(0,Ht.default)((0,jt.jsx)("path",{d:"M21 8H3V4h18v4zm0 2H3v4h18v-4zm0 6H3v4h18v-4z"}),"TableRows");We=ie.default=qt;const Kt=e=>{const{mode:t,onChange:n}=e;return b(nt,{value:t,exclusive:!0,onChange:(i,o)=>{n(o)},size:"small","aria-label":"view mode",children:[r(de,{value:"ships","aria-label":"ships",children:r(Ae,{})}),r(de,{value:"table","aria-label":"table",children:r(We,{})})]})},Jt=e=>{var u,y,C,F;const{filterState:t,shipFilterOptions:n,onChange:s}=e,[i,o]=v.exports.useState(t),[c,p]=v.exports.useTransition(),m=d=>{o(R=>({...R,shipId:d.target.value===""?null:d.target.value,manufacturerFilter:null,strategyTypeFilter:null,tacticTypeFilter:null}))},f=d=>{o(R=>({...R,shipId:null,manufacturerFilter:d.target.value===""?null:d.target.value}))},S=d=>{o(R=>({...R,shipId:null,strategyTypeFilter:d.target.value===""?null:d.target.value}))},a=d=>{o(R=>({...R,shipId:null,tacticTypeFilter:d.target.value===""?null:d.target.value}))},l=()=>{o(d=>({...d,shipId:null,manufacturerFilter:null,strategyTypeFilter:null,tacticTypeFilter:null}))};return v.exports.useEffect(()=>{p(()=>{s(i)})},[i,s]),b(I,{container:!0,spacing:2,children:[r(I,{item:!0,xs:12,sm:8,md:4,children:b(z,{fullWidth:!0,size:"small",children:[r(K,{id:"manufacturer-select-label",children:h("label.researchManufacturer")}),b(U,{labelId:"manufacturer-select-label",value:(u=i.manufacturerFilter)!=null?u:"",label:h("label.researchManufacturer"),onChange:f,children:[r(T,{value:"",children:h("label.notSelected")}),r(W,{}),Object.values($).map(d=>r(T,{value:d,children:te(d)},d))]})]})}),r(I,{item:!0,xs:12,sm:8,md:4,children:b(z,{fullWidth:!0,size:"small",children:[r(K,{id:"tactics-select-label",children:h("label.researchTacticType")}),b(U,{labelId:"tactics-select-label",value:(y=i.tacticTypeFilter)!=null?y:"",label:h("label.researchTacticType"),onChange:a,children:[r(T,{value:"",children:h("label.notSelected")}),r(W,{}),Object.values(V).map(d=>r(T,{value:d,children:re(d)},d))]})]})}),r(I,{item:!0,xs:12,sm:8,md:4,children:b(z,{fullWidth:!0,size:"small",children:[r(K,{id:"strategy-select-label",children:h("label.researchStrategyType")}),b(U,{labelId:"strategy-select-label",value:(C=i.strategyTypeFilter)!=null?C:"",label:h("label.researchStrategyType"),onChange:S,children:[r(T,{value:"",children:h("label.notSelected")}),r(W,{}),Object.values(P).map(d=>r(T,{value:d,children:ae(d)},d))]})]})}),r(I,{item:!0,xs:12,sm:8,children:b(z,{fullWidth:!0,size:"small",children:[r(K,{id:"ship-select-label",children:h("label.ship")}),b(U,{labelId:"ship-select-label",value:(F=i.shipId)!=null?F:"",label:h("label.ship"),onChange:m,children:[r(T,{value:"",children:h("label.notSelected")}),n.wantedShips.length+n.shipsWithWantedModule.length>0&&r(W,{}),n.wantedShips.length+n.shipsWithWantedModule.length>0&&r(Y,{disableSticky:!0,children:h("label.wantedBlueprintColon")}),n.wantedShips.map(d=>b(T,{value:d.id,children:[x(d),r(g,{variant:"body1",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})]},d.id)),n.shipsWithWantedModule.map(({shipDefinition:d,modules:R})=>b(T,{value:d.id,children:[x(d),X()&&r("span",{children:"\xA0"}),h("label.additionalSystemModuleBrackets"),r(g,{variant:"body1",component:"span",sx:{color:"#ffc107",marginLeft:"4px"},children:"\u2605"})]},d.id)),n.remainingShips.length>0&&r(W,{}),n.remainingShips.length>0&&r(Y,{disableSticky:!0,children:h("label.acquirableBlueprintColon")}),n.remainingShips.map(d=>r(T,{value:d.id,children:x(d)},d.id)),n.possessedShips.length>0&&r(W,{}),n.possessedShips.length>0&&r(Y,{disableSticky:!0,children:h("label.acquiredBlueprintColon")}),n.possessedShips.map(d=>r(T,{value:d.id,children:x(d)},d.id))]})]})}),r(I,{item:!0,xs:12,sm:4,sx:{display:"flex",justifyContent:"end"},children:r($e,{variant:"outlined",onClick:l,children:h("button.reset")})})]})},Yt=e=>{const{season:t,seasonDisabled:n,onChangeSeason:s}=e,i=v.exports.useCallback(o=>{s(o.target.value)},[s]);return r(I,{container:!0,spacing:2,children:r(I,{item:!0,xs:12,sm:8,md:4,children:r(z,{fullWidth:!0,size:"small",children:b(U,{value:t,label:null,onChange:i,disabled:n,children:[r(T,{value:j.ONE,children:h("researchAgreement.seasonOne")}),r(T,{value:j.TWO_PLUS,children:h("researchAgreement.seasonTwoPlus")})]})})})})},Zt=v.exports.memo(Nt),Qt=v.exports.memo(Lt),hr=()=>{var F;const[e,t]=Ye(),[n,s]=v.exports.useState("ships"),[i,o]=v.exports.useState((F=k.researchAgreement.getSearchParam("season",e))!=null?F:j.TWO_PLUS),c=v.exports.useMemo(()=>$t(i),[i]),p=v.exports.useMemo(()=>Ze(),[]),m=v.exports.useMemo(()=>Mt(),[]),f=v.exports.useMemo(()=>m.map(d=>At(d,c,p)),[m,c]),S=v.exports.useMemo(()=>Pt(c,p),[c,p]),[a,l]=v.exports.useState({shipId:k.researchAgreement.getSearchParam("shipId",e),manufacturerFilter:k.researchAgreement.getSearchParam("manufacturer",e),strategyTypeFilter:k.researchAgreement.getSearchParam("strategy",e),tacticTypeFilter:k.researchAgreement.getSearchParam("tactic",e)}),u=v.exports.useMemo(()=>kt(f,a),[f,a]),[y,C]=v.exports.useState(null);return v.exports.useEffect(()=>{t(k.researchAgreement.createSearchParams({view:n,season:i,manufacturer:a.manufacturerFilter,strategy:a.strategyTypeFilter,tactic:a.tacticTypeFilter,shipId:a.shipId}))},[n,i,a,t]),b(B,{children:[r(Xe,{currentRoute:"/researchAgreement"}),r(et,{children:r(w,{component:"div",p:1,children:b(O,{spacing:1,children:[b(O,{pt:1,pb:1,spacing:2,children:[r(g,{variant:"body2",children:h("researchAgreement.pageDescription1")}),r(g,{variant:"body2",children:h("researchAgreement.pageDescription2")}),r(g,{variant:"body2",children:h("researchAgreement.pageDescription3")})]}),r(Qe,{children:r(w,{component:"div",p:2,children:b(O,{spacing:4,children:[b(O,{spacing:2,children:[r(g,{variant:"body2",children:h("researchAgreement.environment")}),r("div",{children:r(Yt,{season:i,seasonDisabled:a.shipId!==null,onChangeSeason:o})})]}),b(O,{spacing:2,children:[r(g,{variant:"body2",children:h("label.researchDirection")}),r("div",{children:r(Jt,{filterState:a,onChange:l,shipFilterOptions:S})}),r(w,{component:"div",sx:{display:"flex",justifyContent:"end"},children:r(Kt,{mode:n,onChange:s})})]})]})})}),n==="ships"&&r(Qt,{configurations:u,filterState:a})]})})}),n==="table"&&r(w,{component:"div",p:1,children:r(Zt,{configurations:u,filterState:a,onClickConfiguration:C})}),y&&r(it,{maxWidth:"sm",title:r(Ie,{configuration:y,filterState:a}),content:r(Me,{configuration:y}),actions:r($e,{variant:"outlined",onClick:()=>C(null),children:h("button.close")}),onClose:()=>C(null)}),r(st,{disableContainer:n==="table"})]})};export{hr as ResearchAgreementPage,hr as default};
